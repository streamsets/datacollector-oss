
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="shortcut icon" href="../../../oxygen-webhelp/template/images/favicon.png"><!----></link><link rel="icon" href="../../../oxygen-webhelp/template/images/favicon.png"><!----></link>        
      <meta name="copyright" content="(C) Copyright 2021" /><meta name="DC.rights.owner" content="(C) Copyright 2021" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Drift Synchronization Solution for PostgreSQL" /><meta name="abstract" content="The Drift Synchronization Solution for PostgreSQL detects drift in incoming data and automatically creates or alters corresponding PostgreSQL tables as needed before the data is written." /><meta name="description" content="The Drift Synchronization Solution for PostgreSQL detects drift in incoming data and automatically creates or alters corresponding PostgreSQL tables as needed before the data is written." /><meta name="DC.Relation" scheme="URI" content="../../../datacollector/UserGuide/Solutions/Solutions-title.html" /><meta name="DC.Relation" scheme="URI" content="../../../datacollector/UserGuide/Solutions/HiveDrift-Overview.html#concept_phk_bdf_2w" /><meta name="DC.Relation" scheme="URI" content="../../../datacollector/UserGuide/DPM/DPM_title.html" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="prodname" content="Data Collector" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="version" content="3" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="release" content="16" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="modification" content="0" /><meta name="DC.Date.Created" content="2014-10-31" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_ljq_knr_4cb" /><title>Drift Synchronization Solution for PostgreSQL</title><!--  Generated with Oxygen version 20.0-SNAPSHOT, build number 2018042310.  --><meta name="wh-path2root" content="../../../" /><meta name="wh-toc-id" content="concept_ljq_knr_4cb-d46e181239" />         
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- Latest compiled and minified Bootstrap CSS -->
        <link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css" />

        <!-- Bootstrap Optional theme -->
        <link rel="stylesheet" href="../../../oxygen-webhelp/lib/bootstrap/css/bootstrap-theme.min.css" />
        <link rel="stylesheet" href="../../../oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css" />

        <!-- Template default styles  -->
        <link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/app/topic-page.css?buildId=2018042310" />
        

        <script type="text/javascript" src="../../../oxygen-webhelp/lib/jquery/jquery-3.1.1.min.js"><!----></script>

        <script data-main="../../../oxygen-webhelp/app/topic-page.js" src="../../../oxygen-webhelp/lib/requirejs/require.js"></script>
        
        <!-- Skin resources -->
        <link rel="stylesheet" type="text/css" href="../../../oxygen-webhelp/template/light.css?buildId=2018042310" />
        <!-- EXM-36950 - Expand the args.hdf parameter here -->
        
        
    <link rel="stylesheet" type="text/css" href="../../../skin.css" /></head>

    <body class="wh_topic_page frmBody">
        <!-- EXM-36950 - Expand the args.hdr parameter here -->
        
        
        
<nav class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div class="wh_header_flex_container">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    <a href="http://streamsets.com" class=" wh_logo hidden-xs "></a>
                    <div class=" wh_publication_title "><a href="../../../index.html"><span class="booktitle">  <span class="ph mainbooktitle"><span class="ph">Data Collector</span> User Guide</span>  </span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse">
                
                
                <div class=" wh_indexterms_link "><a href="../../../indexTerms.html" title="Index"><span>Index</span></a></div>
                
            </div>
        </div>
    </div>
</nav>

        <div class=" wh_search_input "><form id="searchForm" method="get" action="../../../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" /><button type="submit" class="wh_search_button"><span>Search</span></button></div><script><!--
                                    $(document).ready(function () {
                                        $('#searchForm').submit(function (e) {
                                            if ($('.wh_search_textfield').val().length < 1) {
                                                e.preventDefault();
                                            }
                                        });
                                    });
                                --></script></form></div>
        
        <div class="container-fluid">
            <div class="row">

                <nav class="wh_tools hidden-print">
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol xmlns:html="http://www.w3.org/1999/xhtml" class="hidden-print"><li><span class="home"><a href="../../../index.html"><span>Home</span></a></span></li>
   <li><span class="topicref" data-id="concept_zq5_pb4_flb"><span class="title"><a href="../../../datacollector/UserGuide/Solutions/Solutions-title.html">Solutions</a></span></span></li>
   <li class="active"><span class="topicref" data-id="concept_ljq_knr_4cb"><span class="title"><a href="../../../datacollector/UserGuide/Solutions/JDBC_DriftSyncSolution.html#concept_ljq_knr_4cb"><span xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="ph">Drift Synchronization Solution for PostgreSQL</span></a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">The <span class="ph">Drift Synchronization Solution for PostgreSQL</span> detects drift in incoming data and automatically creates or alters corresponding         PostgreSQL tables as needed before
                  the data is written.
                  
               </p>
               </span></span></span></li>
</ol></div>

                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links" class="navheader">
  
<span class="navprev"><a class="link" href="../../../datacollector/UserGuide/Solutions/HiveDrift-Overview.html#concept_phk_bdf_2w" title="Drift Synchronization Solution for Hive"></a></span>  
<span class="navnext"><a class="link" href="../../../datacollector/UserGuide/DPM/DPM_title.html" title="StreamSets Control Hub"></a></span>  </span></div>
                        <button class="wh_hide_highlight" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" title="Collapse sections"></button>
                        <div class=" wh_print_link print "><a href="javascript:window.print();" title="Print this page"></a></div>
                    </div>
                </nav>
            </div>

            <div class="wh_content_area">
                <div class="row">
                    
                        <nav role="navigation" id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-3 hidden-xs navbar hidden-print">
                            <div class=" wh_publication_toc " data-tooltip-position="right"><ul>
   <li><span data-tocid="concept_htw_ghg_jq-d46e53" class="topicref" data-id="concept_htw_ghg_jq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Getting_Started/GettingStarted_Title.html#concept_htw_ghg_jq">Getting Started</a></span></span></li>
   <li><span data-tocid="concept_hz3_5fk_fy-d46e1069" class="topicref" data-id="concept_hz3_5fk_fy" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/WhatsNew/WhatsNew_Title.html#concept_hz3_5fk_fy">What's New</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_l4q_flb_kr-d46e13555" class="topicref" data-id="concept_l4q_flb_kr" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Installation/Install_title.html">Installation</a></span></span></li>
   <li><span data-tocid="concept_ylh_yyz_ky-d46e16487" class="topicref" data-id="concept_ylh_yyz_ky" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Configuration/Config_title.html">Configuration</a></span></span></li>
   <li><span data-tocid="concept_ejk_f1f_5v-d46e27547" class="topicref" data-id="concept_ejk_f1f_5v" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Upgrade/Upgrade_title.html">Upgrade</a></span></span></li>
   <li><span data-tocid="concept_qsw_cjy_bt-d46e37770" class="topicref" data-id="concept_qsw_cjy_bt" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Pipeline_Design/PipelineDesign_title.html">Pipeline Concepts and Design</a></span></span></li>
   <li><span data-tocid="concept_qn1_wn4_kq-d46e39642" class="topicref" data-id="concept_qn1_wn4_kq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Pipeline_Configuration/PipelineConfiguration_title.html">Pipeline Configuration</a></span></span></li>
   <li><span data-tocid="concept_hdr_gyw_41b-d46e43996" class="topicref" data-id="concept_hdr_gyw_41b" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Data_Formats/DataFormats-Title.html">Data Formats</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_yjl_nc5_jq-d46e46256" class="topicref" data-id="concept_yjl_nc5_jq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Origins/Origins_title.html">Origins</a></span></span></li>
   <li><span data-tocid="concept_yjl_nc5_jq-d46e116745" class="topicref" data-id="concept_yjl_nc5_jq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Processors/Processors_title.html">Processors</a></span></span></li>
   <li><span data-tocid="concept_agj_cfj_br-d46e137819" class="topicref" data-id="concept_agj_cfj_br" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Destinations/Destinations-title.html">Destinations</a></span></span></li>
   <li><span data-tocid="concept_umc_1lk_fx-d46e165946" class="topicref" data-id="concept_umc_1lk_fx" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Executors/Executors-title.html">Executors</a></span></span></li>
   <li><span data-tocid="concept_xxd_f5r_kx-d46e175595" class="topicref" data-id="concept_xxd_f5r_kx" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Event_Handling/EventFramework-Title.html#concept_xxd_f5r_kx">Dataflow Triggers</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_zq5_pb4_flb-d46e177786" class="topicref" data-id="concept_zq5_pb4_flb" data-state="expanded"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/Solutions-title.html">Solutions</a></span></span><ul class="nav nav-list">
         <li><span data-tocid="concept_aw1_p1q_plb-d46e177808" class="topicref" data-id="concept_aw1_p1q_plb" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/Overview.html#concept_aw1_p1q_plb">Solutions Overview </a></span></span></li>
         <li><span data-tocid="concept_jkm_rnz_kx-d46e177830" class="topicref" data-id="concept_jkm_rnz_kx" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/Parquet.html#concept_jkm_rnz_kx">Converting Data to the Parquet Data Format</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">This solution describes how to convert Avro files to the columnar format,         Parquet.</p>
                     </span></span></span></li>
         <li><span data-tocid="concept_szz_xwm_lx-d46e177855" class="topicref" data-id="concept_szz_xwm_lx" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/Impala.html#concept_szz_xwm_lx">Automating Impala Metadata Updates for Drift Synchronization for Hive</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">This solution describes how to configure a <span class="ph">Drift Synchronization Solution for Hive</span> pipeline to automatically refresh the Impala metadata cache each time changes occur in         the Hive metastore.
                        
                     </p>
                     </span></span></span></li>
         <li><span data-tocid="concept_d1q_xl4_lx-d46e177883" class="topicref" data-id="concept_d1q_xl4_lx" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/FileManagement.html#concept_d1q_xl4_lx">Managing Output Files</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">This solution describes how to design a pipeline that writes output files to a         destination, moves the files to a different
                        location, and then changes the permissions for         the files.
                        
                     </p>
                     </span></span></span></li>
         <li><span data-tocid="concept_kff_ykv_lz-d46e177908" class="topicref" data-id="concept_kff_ykv_lz" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/StopPipeline.html#concept_kff_ykv_lz">Stopping a Pipeline After Processing All Available Data</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">This solution describes how to design a pipeline that stops automatically after it         finishes processing all available
                        data.
                        
                     </p>
                     </span></span></span></li>
         <li><span data-tocid="concept_vrh_jrs_bbb-d46e177933" class="topicref" data-id="concept_vrh_jrs_bbb" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/SqoopReplacement.html#concept_vrh_jrs_bbb">Offloading Data from Relational Sources to Hadoop</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">This solution describes how to offload data from relational database tables to         Hadoop.</p>
                     </span></span></span></li>
         <li><span data-tocid="concept_t2t_lp5_xz-d46e177958" class="topicref" data-id="concept_t2t_lp5_xz" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/SendEmail.html#concept_t2t_lp5_xz">Sending Email During Pipeline Processing</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">This solution describes how to design a pipeline to send email notifications at         different moments during pipeline
                        processing.
                        
                     </p>
                     </span></span></span></li>
         <li><span data-tocid="concept_ocb_nnl_px-d46e177983" class="topicref" data-id="concept_ocb_nnl_px" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/EventStorage.html#concept_ocb_nnl_px">Preserving an Audit Trail of Events</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">This solution describes how to design a pipeline that preserves an audit trail of         pipeline and stage events that occur.</p>
                     </span></span></span></li>
         <li><span data-tocid="concept_a5b_wvk_ckb-d46e178008" class="topicref" data-id="concept_a5b_wvk_ckb" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/DeltaLake.html#concept_a5b_wvk_ckb">Loading Data into Databricks Delta Lake</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">You can use several solutions to load data into a Delta Lake table on Databricks. </p>
                     </span></span></span></li>
         <li><span data-tocid="concept_phk_bdf_2w-d46e178844" class="topicref" data-id="concept_phk_bdf_2w" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/HiveDrift-Overview.html#concept_phk_bdf_2w">Drift Synchronization Solution for Hive</a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">The <span class="ph">Drift Synchronization Solution for Hive</span> detects drift in incoming data and updates corresponding Hive tables. 
                        
                     </p>
                     </span></span></span></li>
         <li class="active"><span data-tocid="concept_ljq_knr_4cb-d46e181239" class="topicref" data-id="concept_ljq_knr_4cb" data-state="expanded"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/JDBC_DriftSyncSolution.html#concept_ljq_knr_4cb"><span xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="ph">Drift Synchronization Solution for PostgreSQL</span></a><span class="wh-tooltip">
                     
                     <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc">The <span class="ph">Drift Synchronization Solution for PostgreSQL</span> detects drift in incoming data and automatically creates or alters corresponding         PostgreSQL tables as needed before
                        the data is written.
                        
                     </p>
                     </span></span></span><ul class="nav nav-list">
               <li><span data-tocid="concept_ztm_pqr_4cb-d46e181359" class="topicref" data-id="concept_ztm_pqr_4cb" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/JDBC_DriftSyncSolution.html#concept_ztm_pqr_4cb">Basic Implementation and Processing</a></span></span></li>
               <li><span data-tocid="concept_z2v_fp1_scb-d46e181413" class="topicref" data-id="concept_z2v_fp1_scb" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/JDBC_DriftSyncSolution.html#concept_z2v_fp1_scb">Requirements</a></span></span></li>
               <li><span data-tocid="concept_s2c_qht_pcb-d46e181455" class="topicref" data-id="concept_s2c_qht_pcb" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/JDBC_DriftSyncSolution.html#concept_s2c_qht_pcb">Implementation Steps</a></span></span></li>
               <li><span data-tocid="concept_lzy_wb3_qcb-d46e181507" class="topicref" data-id="concept_lzy_wb3_qcb" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/JDBC_DriftSyncSolution.html#concept_lzy_wb3_qcb">Case Study</a></span></span></li>
               <li><span data-tocid="concept_iwv_nz5_mnb-d46e181920" class="topicref" data-id="concept_iwv_nz5_mnb" data-state="leaf"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Solutions/JDBC_DriftSyncSolution.html#concept_iwv_nz5_mnb">PostgreSQL Data Types</a><span class="wh-tooltip">
                           
                           <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
                           </span></span></span></li>
            </ul>
         </li>
      </ul>
   </li>
   <li><span data-tocid="concept_ugp_kwf_xw-d46e181946" class="topicref" data-id="concept_ugp_kwf_xw" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/DPM/DPM_title.html">StreamSets Control Hub</a></span></span></li>
   <li><span data-tocid="concept_fyf_gkq_4bb-d46e185479" class="topicref" data-id="concept_fyf_gkq_4bb" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Edge_Mode/EdgePipelines_title.html"><span xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="ph">StreamSets Data Collector Edge</span></a></span></span></li>
   <li><span data-tocid="concept_wwq_gxc_py-d46e188082" class="topicref" data-id="concept_wwq_gxc_py" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Multithreaded_Pipelines/MultithreadedPipelines.html#concept_wwq_gxc_py">Multithreaded Pipelines</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_gzw_tdm_p2b-d46e188664" class="topicref" data-id="concept_gzw_tdm_p2b" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Microservice/Microservice_Title.html#concept_gzw_tdm_p2b">Microservice Pipelines</a></span></span></li>
   <li><span data-tocid="Orchestrators_Title-d46e189036" class="topicref" data-id="Orchestrators_Title" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Orchestration_Pipelines/OrchestrationPipelines_Title.html#Orchestrators_Title">Orchestration Pipelines</a></span></span></li>
   <li><span data-tocid="concept_wr1_ktz_bt-d46e189328" class="topicref" data-id="concept_wr1_ktz_bt" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/RPC_Pipelines/SDC_RPCpipelines_title.html#concept_wr1_ktz_bt">SDC RPC Pipelines</a></span></span></li>
   <li><span data-tocid="concept_fpz_5r4_vs-d46e189810" class="topicref" data-id="concept_fpz_5r4_vs" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Cluster_Mode/ClusterPipelines_title.html">Cluster Pipelines</a></span></span></li>
   <li><span data-tocid="concept_jjk_23z_sq-d46e190910" class="topicref" data-id="concept_jjk_23z_sq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Data_Preview/DataPreview_Title.html#concept_jjk_23z_sq">Data Preview</a></span></span></li>
   <li><span data-tocid="concept_pgk_brx_rr-d46e191866" class="topicref" data-id="concept_pgk_brx_rr" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Alerts/RulesAlerts_title.html#concept_pgk_brx_rr">Rules and Alerts</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_asx_fdz_sq-d46e194494" class="topicref" data-id="concept_asx_fdz_sq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Pipeline_Monitoring/PipelineMonitoring_title.html#concept_asx_fdz_sq">Pipeline Monitoring</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_o3l_dtr_5q-d46e195751" class="topicref" data-id="concept_o3l_dtr_5q" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Pipeline_Maintenance/PipelineMaintenance_title.html#concept_o3l_dtr_5q">Pipeline Maintenance</a></span></span></li>
   <li><span data-tocid="concept_yms_ftm_sq-d46e197581" class="topicref" data-id="concept_yms_ftm_sq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Administration/Administration_title.html#concept_yms_ftm_sq">Administration</a></span></span></li>
   <li><span data-tocid="concept_nls_w1r_ks-d46e203061" class="topicref" data-id="concept_nls_w1r_ks" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Tutorial/Tutorial-title.html">Tutorial</a></span></span></li>
   <li><span data-tocid="concept_sh3_frm_tq-d46e204266" class="topicref" data-id="concept_sh3_frm_tq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Troubleshooting/Troubleshooting_title.html#concept_sh3_frm_tq">Troubleshooting</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_xbx_rs1_tq-d46e211117" class="topicref" data-id="concept_xbx_rs1_tq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Glossary/Glossary_title.html#concept_xbx_rs1_tq">Glossary</a></span></span></li>
   <li><span data-tocid="concept_jn1_nzb_kv-d46e211172" class="topicref" data-id="concept_jn1_nzb_kv" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Apx-DataFormats/DataFormat_Title.html#concept_jn1_nzb_kv">Data Formats by Stage</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_pvm_yt3_wq-d46e211394" class="topicref" data-id="concept_pvm_yt3_wq" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Expression_Language/ExpressionLanguage_title.html">Expression Language</a></span></span></li>
   <li><span data-tocid="concept_vcj_1ws_js-d46e215065" class="topicref" data-id="concept_vcj_1ws_js" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Apx-RegEx/RegEx-Title.html#concept_vcj_1ws_js">Regular Expressions</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
   <li><span data-tocid="concept_chv_vmj_wr-d46e215288" class="topicref" data-id="concept_chv_vmj_wr" data-state="not-ready"><span class="wh-expand-btn"></span><span class="title"><a href="../../../datacollector/UserGuide/Apx-GrokPatterns/GrokPatterns_title.html#concept_chv_vmj_wr">Grok Patterns</a><span class="wh-tooltip">
               
               <p xmlns:toc="http://www.oxygenxml.com/ns/webhelp/toc" xmlns:xhtml="http://www.w3.org/1999/xhtml" class="shortdesc"></p>
               </span></span></span></li>
</ul></div>
                        </nav>
                    
                    
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12" id="wh_topic_body">
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1"><article class="nested0" aria-labelledby="ariaid-title1" id="concept_ljq_knr_4cb">
    <h1 class="title topictitle1" id="ariaid-title1"><span class="ph">Drift Synchronization Solution for PostgreSQL</span></h1>

    
    <div class="body conbody"><p class="shortdesc">The <span class="ph">Drift Synchronization Solution for PostgreSQL</span> detects drift in incoming data and automatically creates or alters corresponding
        PostgreSQL tables as needed before the data is written.</p>

        <p class="p">For example, say you want to write nationwide
            inventory data to PostgreSQL tables. As you acquire new stores or as individual stores
            upgrade their systems, the structure of the data changes. To mandate that every store
            uses the same data structure is possible, but not practical. You prefer a solution that
            adapts to this changing environment.</p>

        <p class="p">With the <span class="ph">Drift Synchronization Solution for PostgreSQL</span>, the <span class="ph">PostgreSQL Metadata processor</span> determines when new tables or fields are required and submits create and alter table
            commands to the database to make those changes. </p>

        <p class="p">The JDBC Producer destination performs the writes. By the time the data reaches the JDBC
            Producer, the newly created or altered database tables are ready to be used. </p>

        <p class="p"><span class="ph">All columns in the tables created or altered by the
                              <span class="ph">PostgreSQL Metadata processor</span> allow
                        nulls. When writing records with missing fields, the database inserts null
                        values in the corresponding columns.</span>
        </p>

        <p class="p">By creating and altering tables based on record requirements, the <span class="ph">Drift Synchronization Solution for PostgreSQL</span> enables writing data with changing data structures to PostgreSQL with no additional
            intervention.</p>

        <p class="p"><span class="ph">Before deploying the <span class="ph">Drift Synchronization Solution for PostgreSQL</span>, consider the create and
                        alter table speed of your database, and the create and alter table
                        requirements of the incoming data. If the required changes cannot be
                        performed quickly by the database, the <span class="ph">Drift Synchronization Solution for PostgreSQL</span> might not be an appropriate
                        solution.</span></p>

        <p class="p"><span class="ph">Support for additional databases is planned for future
                        releases. To state a preference, leave a comment on <a class="xref" href="https://issues.streamsets.com/browse/SDC-8051" target="_blank">this issue</a>.</span></p>

    </div>

<article class="topic concept nested1" aria-labelledby="ariaid-title2" id="concept_ztm_pqr_4cb">
    <h2 class="title topictitle2" id="ariaid-title2">Basic Implementation and Processing</h2>

    <div class="body conbody">
        <p class="p">A basic implementation of the <span class="ph">Drift Synchronization Solution for PostgreSQL</span> includes the origin of your choice, the <span class="ph">PostgreSQL Metadata processor</span>, and the JDBC Producer destination:</p>

        <p class="p"><img class="image" id="concept_ztm_pqr_4cb__image_lqh_tfj_qcb" src="../Graphics/JDBCDrift_basic.png" height="83" width="388" /></p>

        <p class="p">The <span class="ph">Drift Synchronization Solution for PostgreSQL</span> uses the <span class="ph">PostgreSQL Metadata processor</span> and JDBC Producer destination as follows:</p>

        <div class="p">
            <dl class="dl">
                
                    <dt class="dt dlterm"><span class="ph">PostgreSQL Metadata processor</span> for drift detection and table changes</dt>

                    <dd class="dd">When processing records, the <a class="xref" href="../Processors/PostgreSQLMetadata.html#concept_lcp_ssh_qcb"><span class="ph">PostgreSQL Metadata processor</span></a> detects the need for new tables and columns. Upon detecting
                        the need for changes, it executes data definition language (DDL) to create
                        new database tables or alter existing tables, as needed. This allows the
                        database to create or alter tables before records reach the JDBC Producer
                        destination. </dd>

                    <dd class="dd ddexpand">The processor creates tables and add columns to tables. It does not drop
                        existing columns from tables. </dd>

                    <dd class="dd ddexpand">
                        <div class="note note"><span class="notetitle">Note:</span> <span class="ph">Before deploying the <span class="ph">Drift Synchronization Solution for PostgreSQL</span>, consider the create and
                        alter table speed of your database, and the create and alter table
                        requirements of the incoming data. If the required changes cannot be
                        performed quickly by the database, the <span class="ph">Drift Synchronization Solution for PostgreSQL</span> might not be an appropriate
                        solution.</span></div>

                    </dd>

                
                
                    <dt class="dt dlterm">JDBC Producer destination for writes to new and altered tables</dt>

                    <dd class="dd">The <a class="xref" href="../Destinations/JDBCProducer.html#concept_kvs_3hh_ht">JDBC
                            Producer destination</a> writes data to the database based on the
                        configuration properties in the stage. </dd>

                    <dd class="dd ddexpand"><span class="ph">All columns in the tables created or altered by the
                              <span class="ph">PostgreSQL Metadata processor</span> allow
                        nulls. When writing records with missing fields, the database inserts null
                        values in the corresponding columns.</span></dd>

                
            </dl>

        </div>

    </div>

<article class="topic concept nested2" aria-labelledby="ariaid-title3" id="concept_yjj_vht_pcb">
    <h3 class="title topictitle3" id="ariaid-title3">Flattening Records</h3>

    <div class="body conbody">
        <p class="p">At this time, the <span class="ph">Drift Synchronization Solution for PostgreSQL</span> does not process records with nested fields. If necessary, you can use the <a class="xref" href="../Processors/FieldFlattener.html#concept_njn_3kk_fx">Field Flattener
                processor</a> to flatten records with nested fields before passing them to the
                <span class="ph">PostgreSQL Metadata processor</span>. </p>

        <p class="p">A basic implementation of the <span class="ph">Drift Synchronization Solution for PostgreSQL</span> with a Field Flattener looks like this:</p>

        <p class="p"><img class="image" id="concept_yjj_vht_pcb__image_z4c_1kj_qcb" src="../Graphics/JDBCDrift-basic_FieldFlattener.png" height="78" width="528" /></p>

    </div>

</article>
</article>
<article class="topic concept nested1" aria-labelledby="ariaid-title4" id="concept_z2v_fp1_scb">
    <h2 class="title topictitle2" id="ariaid-title4">Requirements</h2>

    <div class="body conbody">
        <div class="p">To use the <span class="ph">Drift Synchronization Solution for PostgreSQL</span>, you need the following:<dl class="dl">
                
                    <dt class="dt dlterm">Target table information</dt>

                    <dd class="dd">To write a record to the appropriate table in the database, the <span class="ph">PostgreSQL Metadata processor</span> and JDBC Producer destination must be able to determine the table to use
                        for each record. </dd>

                    <dd class="dd ddexpand">If you write all records to one table, you can specify the table name in
                        stage properties. However, usually records need to be written to different
                        tables. In this case, the table name must be available within the record, as
                        in a record field or in a record header attribute. </dd>

                    <dd class="dd ddexpand">For example, if data in a field can be used as a table name, then you can
                        use an expression for the Table Name properties, such as
                            <code class="ph codeph">${record:value('/&lt;field name&gt;')}</code>.</dd>

                    <dd class="dd ddexpand">The <a class="xref" href="../Origins/JDBCConsumer.html#concept_egw_d4c_kw">JDBC Query Consumer</a> and the <a class="xref" href="../Origins/MultiTableJDBCConsumer.html#concept_xrx_11y_4y">JDBC Multitable Consumer</a> origins can both place the originating
                        table name in record header attributes. You can use the following expression
                        to use the attribute value for the table name:
                            <code class="ph codeph">${record:attribute('&lt;attribute name&gt;')}</code>.</dd>

                    <dd class="dd ddexpand">If the table name does not exist in the record, you can use an <a class="xref" href="../Processors/Expression.html#concept_zm2_pp3_wq">Expression
                            Evaluator processor</a> to generate that information. That is, if you
                        can determine the table to use by performing a calculation, you can write
                        the resulting table name to a field, then use that field for the write.
                    </dd>

                
                
                    <dt class="dt dlterm">Decimal precision and scale information</dt>

                    <dd class="dd">To enable the <span class="ph">PostgreSQL Metadata processor</span> to create Decimal fields with the correct precision and scale, the
                        processor must be able to determine the precision and scale to use. By
                        default, the processor looks for the information in "precision" and "scale"
                        field attributes for every Decimal field. </dd>

                    <dd class="dd ddexpand">Both the <a class="xref" href="../Origins/JDBCConsumer.html#concept_egw_d4c_kw">JDBC Query Consumer</a> and <a class="xref" href="../Origins/MultiTableJDBCConsumer.html#concept_xrx_11y_4y">JDBC Multitable Consumer</a>
                        <span class="ph">origins
                                          store the precision and scale of Decimal columns in
                                          "precision" and "scale" field attributes for each Decimal
                                          field.</span> So when processing data from these origins, you can use the <span class="ph">PostgreSQL Metadata processor</span> defaults. </dd>

                    <dd class="dd ddexpand"><span class="ph">When processing data from other origins, you can use the
                                          Expression Evaluator processor earlier in the pipeline to
                                          create precision and scale field attributes for Decimal
                                          fields. </span></dd>

                
                
                    <dt class="dt dlterm">Database permissions</dt>

                    <dd class="dd">The user account used for connection credentials in the <span class="ph">PostgreSQL Metadata processor</span>
                        <span class="ph">must have both the Create Table and
                              Alter Table permissions on the database.</span>
                    </dd>

                    <dd class="dd ddexpand">The user account used for connection credentials in the JDBC Producer
                        destination needs Write permission.</dd>

                
                
                    <dt class="dt dlterm">Primary use of the target tables </dt>

                    <dd class="dd"><span class="ph">Do not alter any table that might be used by the
                        pipeline while the pipeline runs. Since the <span class="ph">PostgreSQL Metadata processor</span> caches
                        information about table structures and creates and alters tables, the
                        processor must have accurate information about the tables.</span></dd>

                
            </dl>
</div>

    </div>

</article>
<article class="topic concept nested1" aria-labelledby="ariaid-title5" id="concept_s2c_qht_pcb">
    <h2 class="title topictitle2" id="ariaid-title5">Implementation Steps</h2>

    <div class="body conbody">
        <div class="p">To implement the <span class="ph">Drift Synchronization Solution for PostgreSQL</span>, perform the following steps:<ol class="ol" id="concept_s2c_qht_pcb__ol_zr1_3j3_fw">
                <li class="li"> Configure the origin and any additional processors that you want to use. <p class="p">If
                        data includes records with nested fields, add a Field Flattener to flatten
                        records before passing them to the <span class="ph">PostgreSQL Metadata processor</span>.</p>
<p class="p">If each record does not include the table where the record should
                        be written or the precision and scale information required for Decimal
                        fields, use an Expression Evaluator to generate that information. You can
                        write the information to a field, record header attribute, or field
                        attributes, as best suits your needs. For more information, see <a class="xref" href="JDBC_DriftSyncSolution.html#concept_z2v_fp1_scb">Requirements</a>.</p>
</li>

                <li class="li">To capture drift and alter database tables, configure the <a class="xref" href="../Processors/PostgreSQLMetadata.html#concept_lcp_ssh_qcb"><span class="ph">PostgreSQL Metadata processor</span></a>:<ol class="ol" type="a" id="concept_s2c_qht_pcb__ol_qsk_5x3_fw">
                        <li class="li">If you haven't yet, <span class="ph">install the JDBC driver for the database. You cannot access
                        the database until you install the required driver. </span>
                            <span class="ph">For information about installing additional drivers, see
                              <a class="xref" href="../Configuration/ExternalLibs.html#concept_pdv_qlw_ft">Install External Libraries</a>.</span></li>

                        <li class="li">Configure the connection information.<p class="p"><span class="ph">The user account used for the connection
                        credentials <span class="ph" id="concept_s2c_qht_pcb__d12e7246">must have both the Create Table and
                              Alter Table permissions on the database.</span></span>
                            </p>
<div class="p">
                                <div class="note tip"><span class="tiptitle">Tip:</span> You might set up <a class="xref" href="../Pipeline_Configuration/RuntimeValues.html#concept_rjh_ntz_qr" title="Runtime parameters are parameters that you define in a pipeline and then call from within that same pipeline. When the pipeline runs, the value replaces the name of the runtime parameter. Use runtime parameters to define values for stage and pipeline properties.">runtime parameters</a> for the JDBC URL to make
                                    configuring the <span class="ph">PostgreSQL Metadata processor</span> and the JDBC Producer easier. <span class="ph">To
                        secure sensitive information such as user names and passwords, you can use
                              <a class="xref" href="../Pipeline_Configuration/RuntimeValues.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure information.">runtime resources</a> or <span class="ph"><a class="xref" href="../Configuration/CredentialStores.html#concept_bt1_bpj_r1b">credential stores.</a></span></span></div>

                            </div>
</li>

                        <li class="li">Configure the schema name and table name. <p class="p">You can enter schema and
                                table names or use an expression that evaluates to the schemas and
                                table names to use. </p>
<p class="p">When processing data from either of the
                                JDBC origins, you can use a record header attribute for the table
                                name. The <span class="ph">JDBC Multitable Consumer origin writes the
                        originating table name in the <code class="ph codeph">jdbc.tables</code> record header
                        attribute.</span>
                                <span class="ph">If you want to write records to tables of the
                        same name, you can use <code class="ph codeph">${record:attribute('jdbc.tables')}</code>
                        for the table name property.</span></p>
<p class="p">Similarly, the <span class="ph">JDBC Query Consumer writes the originating table name
                        in a <code class="ph codeph">&lt;user-defined prefix&gt;.tables</code> record header
                        attribute when the origin is configured to create record header
                        attributes.</span>
                                <span class="ph">So if you want to write records to tables of the
                        same name, you can use <code class="ph codeph">${record:attribute('&lt;user defined
                              prefix&gt;.tables')}</code> for the table name property.</span>
                            </p>
<p class="p">For data from other origins, when necessary, you can use an
                                Expression Evaluator earlier in the pipeline to write the
                                information to a record field or record header attribute.</p>
</li>

                        <li class="li">Configure the decimal field precision
                              and scale attribute names.<p class="p" id="concept_s2c_qht_pcb__d12e7296">When
                                    processing data from the JDBC Query Consumer or JDBC Multitable
                                    Consumer origins, use the default attribute names, "precision"
                                    and "scale". Both <span class="ph" id="concept_s2c_qht_pcb__d12e7298">origins
                                          store the precision and scale of Decimal columns in
                                          "precision" and "scale" field attributes for each Decimal
                                          field.</span></p>
<p class="p"><span class="ph" id="concept_s2c_qht_pcb__d12e7301">When processing data from other origins, you can use the
                                          Expression Evaluator processor earlier in the pipeline to
                                          create precision and scale field attributes for Decimal
                                          fields. </span></p>
</li>

                        <li class="li">Configure the rest of the processor properties as needed.</li>

                    </ol>
<p class="p">For more information about the <span class="ph">PostgreSQL Metadata processor</span>, see <a class="xref" href="../Processors/PostgreSQLMetadata.html#concept_lcp_ssh_qcb">PostgreSQL Metadata</a>.</p>
</li>

                <li class="li">Configure the JDBC Producer destination to write to PostgreSQL tables:<ol class="ol" type="a" id="concept_s2c_qht_pcb__ol_k12_ty3_fw">
                        <li class="li">Configure the connection information. The user account used for the
                            connection credentials must have Write permission on the database.<div class="note tip"><span class="tiptitle">Tip:</span> You might set up <a class="xref" href="../Pipeline_Configuration/RuntimeValues.html#concept_rjh_ntz_qr" title="Runtime parameters are parameters that you define in a pipeline and then call from within that same pipeline. When the pipeline runs, the value replaces the name of the runtime parameter. Use runtime parameters to define values for stage and pipeline properties.">runtime parameters</a> for the JDBC URL to make configuring
                                the <span class="ph">PostgreSQL Metadata processor</span> and the JDBC Producer easier. <span class="ph">To
                        secure sensitive information such as user names and passwords, you can use
                              <a class="xref" href="../Pipeline_Configuration/RuntimeValues.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure information.">runtime resources</a> or <span class="ph"><a class="xref" href="../Configuration/CredentialStores.html#concept_bt1_bpj_r1b">credential stores.</a></span></span></div>
</li>

                        <li class="li">Configure the Table Name property. Use the same expression used for the
                            table name in the <span class="ph">PostgreSQL Metadata processor</span>.</li>

                        <li class="li">Use the default INSERT operation. </li>

                        <li class="li">Configure the rest of the destination as needed.</li>

                    </ol>
<p class="p">For more information about the JDBC Producer destination, see <a class="xref" href="../Destinations/JDBCProducer.html#concept_kvs_3hh_ht">JDBC Producer</a>.</p>
</li>

            </ol>
</div>

    </div>

</article>
<article class="topic concept nested1" aria-labelledby="ariaid-title6" id="concept_lzy_wb3_qcb">
    <h2 class="title topictitle2" id="ariaid-title6">Case Study</h2>

    <div class="body conbody">
        <p class="p">Let's say you want to replicate a set of Oracle tables
            to PostgreSQL, and you need any changes to the Oracle tables to be mirrored in the
            PostgreSQL tables. </p>

        <p class="p">To do this, you start with the JDBC Multitable Consumer origin and connect it to the <span class="ph">PostgreSQL Metadata processor</span>. Then, use a JDBC Producer destination to write to PostgreSQL. The resulting pipeline
            looks like this:</p>

        <p class="p"><img class="image" id="concept_lzy_wb3_qcb__image_oyv_2sp_qcb" src="../Graphics/JDBC-CaseStudyPipe.png" /></p>

        <p class="p">Let's take a closer look... </p>

    </div>

<article class="topic concept nested2" aria-labelledby="ariaid-title7" id="concept_v2l_f4p_qcb">
    <h3 class="title topictitle3" id="ariaid-title7">The JDBC Multitable Consumer Origin</h3>

    <div class="body conbody">
        <p class="p">The <a class="xref" href="../Origins/MultiTableJDBCConsumer.html#concept_zp3_wnw_4y">JDBC
                Multitable Consumer origin</a> can use multiple threads to process data from
            database tables, up to one thread per table, so it is an ideal origin to process data
            from a large set of database tables.</p>

        <p class="p">The <span class="ph">JDBC Multitable Consumer origin writes the
                        originating table name in the <code class="ph codeph">jdbc.tables</code> record header
                        attribute.</span> The origin also stores the original precision and scale for Decimal columns in field
            attributes for each Decimal field in the record.</p>

        <p class="p">The <span class="ph">PostgreSQL Metadata processor</span> uses this information to write records to database tables and to create Decimal
            fields with the correct precision and scale.</p>

        <p class="p">To use the <span class="ph">Drift Synchronization Solution for PostgreSQL</span> with the JDBC Multitable Consumer origin, you don't need to configure anything
            special in the origin, simply configure the origin to read from the Oracle tables that
            you want to process and connect it to the <span class="ph">PostgreSQL Metadata processor</span>.</p>

    </div>

</article>
<article class="topic concept nested2" aria-labelledby="ariaid-title8" id="concept_vdv_j4p_qcb">
    <h3 class="title topictitle3" id="ariaid-title8">The PostgreSQL Metadata Processor</h3>

    <div class="body conbody">
        <p class="p">The <a class="xref" href="../Processors/PostgreSQLMetadata.html#concept_lcp_ssh_qcb"><span class="ph">PostgreSQL Metadata processor</span></a> performs the heavy lifting for the <span class="ph">Drift Synchronization Solution for PostgreSQL</span>. </p>

        <p class="p">When processing data, the <span class="ph">PostgreSQL Metadata processor</span> uses a table name
                  expression to determine the name of the target table to use for each record. If
                  the target table is not in the processor's cache, the processor queries the
                  database for table information and caches the results. When the target table is in
                  the cache, the processor compares the record structure against cached table
                  structure. </p>

        <p class="p">When a record includes fields that do not exist in the
                  table, the <span class="ph">PostgreSQL Metadata processor</span> alters
                  the table as needed, then updates the table information in the cache. When a
                  record should be written to a table that does not exist, the processor creates the
                  table based on the fields in the record.</p>

        <p class="p">When you configure the <span class="ph">PostgreSQL Metadata processor</span>, you configure the connection information for the PostgreSQL database and other
            standard properties. <span class="ph">The user account used for the connection
                        credentials <span class="ph" id="concept_vdv_j4p_qcb__d12e7246">must have both the Create Table and
                              Alter Table permissions on the database.</span></span></p>

        <p class="p">Then, since the JDBC Multitable Consumer writes the table name to the jdbc.tables record
            header attribute, you use the following expression for the Table Name property to call
            that information: <code class="ph codeph">${record:attribute('jdbc.tables')}</code>.</p>

        <p class="p">The JDBC Multitable Consumer also writes the precision and scale for each Decimal field
            to "precision" and "scale" attributes for each Decimal field. So you can use the
            defaults for the Decimal Scale Attribute and Decimal Precision attribute properties. </p>

        <p class="p">The resulting <span class="ph">PostgreSQL Metadata processor</span> looks like this:</p>

        <p class="p"><img class="image" id="concept_vdv_j4p_qcb__image_eq5_5gz_rcb" src="../Graphics/JDBC-CaseStudy-Processor.png" height="443" width="584" /></p>

    </div>

</article>
<article class="topic concept nested2" aria-labelledby="ariaid-title9" id="concept_nst_44p_qcb">
    <h3 class="title topictitle3" id="ariaid-title9">The JDBC Producer Destination</h3>

    <div class="body conbody">
        <p class="p">To write the data to PostgreSQL, you use the <a class="xref" href="../Destinations/JDBCProducer.html#concept_kvs_3hh_ht">JDBC Producer
                destination</a>. </p>

        <p class="p">When you configure the destination, you configure the connection information, the tables
            to write to, and the default operation. Because you are replicating tables, all of the
            field names will match the column names, so you don't need to specify any field to
            column mappings. Configure other properties as needed.</p>

        <p class="p">For the connection properties, use the same connection string and schema name that you
            used for the <span class="ph">PostgreSQL Metadata processor</span>. The user account associated with the credentials must have Write permission on the
            database.</p>

        <p class="p">For the Table Name property, use the same expression that you used in the <span class="ph">PostgreSQL Metadata processor</span>: <code class="ph codeph">${record:attribute('jdbc.tables')}</code>. This enables the destination to write each record to the table defined in the
            jdbc.tables record header attribute. When needed, the <span class="ph">PostgreSQL Metadata processor</span> creates or alters the table to allow the record to be written without errors.</p>

        <p class="p">Then, set the default operation to INSERT.</p>

        <p class="p">The configured destination should look something like this:</p>

        <p class="p"><img class="image" id="concept_nst_44p_qcb__image_cf3_x11_scb" src="../Graphics/JDBC-CaseStudy-Destination.png" height="424" width="577" /></p>

    </div>

</article>
<article class="topic concept nested2" aria-labelledby="ariaid-title10" id="concept_y14_dy1_scb">
    <h3 class="title topictitle3" id="ariaid-title10">Running the Pipeline</h3>

    <div class="body conbody">
        <div class="p">When the pipeline runs, the following actions occur:<ul class="ul" id="concept_y14_dy1_scb__ul_qzc_gy1_scb">
                <li class="li">The <span class="ph">PostgreSQL Metadata processor</span> assesses each record, checking the jdbc.tables header attribute for the table
                    each record requires, and comparing the record structure against the cached
                    table structure. If the table is not cached, the <span class="ph">PostgreSQL Metadata processor</span> pings the database for table information, then performs the comparison.</li>

                <li class="li">When a record includes a new or changed field, the <span class="ph">PostgreSQL Metadata processor</span> sends an alter table command to the database, then updates the table
                    information in its cache. When a record requires a table that does not exist,
                    the <span class="ph">PostgreSQL Metadata processor</span> creates the table based on the record structure. </li>

                <li class="li">When creating Decimal columns, the <span class="ph">PostgreSQL Metadata processor</span> uses information in the precision and scale field attributes for the
                    corresponding Decimal field.</li>

                <li class="li">The JDBC Producer writes the records to tables based on the table name in the
                    jdbc.tables header attribute. <p class="p"><span class="ph">All columns in the tables created or altered by the
                              <span class="ph">PostgreSQL Metadata processor</span> allow
                        nulls. When writing records with missing fields, the database inserts null
                        values in the corresponding columns.</span></p>
<p class="p">Since the <span class="ph">PostgreSQL Metadata processor</span> created and altered tables as needed, no write errors should occur from
                        structural changes in the data.</p>
</li>

                <li class="li">When the pipeline stops, the <span class="ph">PostgreSQL Metadata processor</span> cache is cleared. </li>

            </ul>
</div>

    </div>

</article>
</article>
<article class="topic concept nested1" aria-labelledby="ariaid-title11" id="concept_iwv_nz5_mnb">
    <h2 class="title topictitle2" id="ariaid-title11">PostgreSQL Data Types</h2>

    
    <div class="body conbody"><p class="shortdesc"></p>

        <div class="p">The following
            table lists <span class="ph">Data Collector</span> data
            types and the corresponding PostgreSQL data types. The PostgreSQL Metadata processor
            uses these conversions when generating CREATE TABLE and ALTER TABLE statements.
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_iwv_nz5_mnb__table_bcm_jlm_hw" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:50%" /><col style="width:50%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr>
                            <th class="entry cellrowborder" id="d708331e988"><span class="ph">Data Collector</span> Data Type</th>

                            <th class="entry cellrowborder" id="d708331e993">PostgreSQL Data Type</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Boolean</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Boolean</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Byte Array</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Bytea</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Char</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Character</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Date</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Date </td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Datetime</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Timestamp without time zone</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Decimal</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Numeric</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Double</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Double precision</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Float</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Real</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Integer</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Integer</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Long</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Bigint</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">List</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Not supported</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">List-Map</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Not supported</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Map</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Not supported</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Short</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Smallint</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">String</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Character varying</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Time</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Time without time zone</td>

                        </tr>

                        <tr>
                            <td class="entry cellrowborder" headers="d708331e988 ">Zoned Datetime</td>

                            <td class="entry cellrowborder" headers="d708331e993 ">Timestamp with time zone</td>

                        </tr>

                    </tbody>
</table>
</div>
</div>

    </div>

</article>
</article>
</article></main></div>
                        
                        
                        
                    </div>
                    
                </div>
            </div>
        </div> <nav class="navbar navbar-default wh_footer">
  <div class=" footer-container text-center ">
    <!-- Copyright 2018 StreamSets Inc. --><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script>
  </div>
</nav>

        
        <div id="go2top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close glyphicon glyphicon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        <script src="../../../oxygen-webhelp/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
         Apache License, Version 2.0.
    </body>
</html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="The StreamSets expression language enables you to create expressions that evaluate or modify data. The StreamSets expression language is based on the JSP 2.0 expression language. Use the expression ..." /><meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Expression Language" /><meta name="DC.Relation" scheme="URI" content="../Expression_Language/ExpressionLanguage_title.html" /><meta name="DC.Relation" scheme="URI" content="../Pipeline_Configuration/PipelineConfiguration_title.html#concept_ofb_1cm_xq" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_p54_4kl_vq" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Expression Language</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Expression_Language/ExpressionLanguage_title.html" title="Expression Language">Expression Language</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Expression_Language/ExpressionLanguage_title.html" title="Expression Language"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Expression Language</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_p54_4kl_vq">
 <h1 class="title topictitle1">Expression Language</h1>

 <div class="body conbody">
  <p class="p">The StreamSets expression language
      enables you to create expressions that evaluate or modify data. The StreamSets expression
      language is based on the JSP 2.0 expression language. </p>

    <p class="p">Use the expression language to configure expressions and conditions in
                  processors, such as the Expression Evaluator or Stream Selector. Some destination
                  properties also require the expression language, such as the directory template
                  for Hadoop FS or Local FS. </p>
<p class="p">Optionally, you can use the expression language to define any stage or
                  pipeline property that represents a numeric or string value. This allows you to
                  use runtime parameters or runtime properties throughout the pipeline. You can use
                  expression completion to determine where you can use an expression and the
                  expression elements that you can use in that location. </p>
<div class="p">You can use the following elements in an expression:<ul class="ul" id="concept_p54_4kl_vq__d32320e3085">
                        <li class="li">Constants</li>

                        <li class="li">Datetime variables</li>

                        <li class="li">Field names</li>

                        <li class="li">Functions</li>

                        <li class="li">Literals</li>

                        <li class="li">Operators</li>

                        <li class="li">Runtime parameters</li>

                        <li class="li">Runtime properties</li>

                        <li class="li">Runtime resources</li>

                  </ul>
</div>

 </div>

  <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../Pipeline_Configuration/PipelineConfiguration_title.html#concept_ofb_1cm_xq" title="Precede all expressions with a dollar sign and enclose them with curly brackets, as follows: ${&lt;expression&gt;}.You can use quotation marks and the backslash character to handle special characters in field names. When a pipeline is valid for preview, you can generally select fields from a list. When a list is not available or when you are defining a new field name, you need to use the appropriate format for the field name. In some processors, you can use the asterisk wildcard (*) as indices in an array or key values in a map. Use a wildcard to help define the field paths for maps and arrays. Use the following information and tips when you invoke expression completion:When an expression requires, the expression language attempts implicit data type conversion - a.k.a. data type coercion. When coercion is not possible, Data Collector passes the error records to the stage for error handling.">Expression Configuration</a></div>
</div>
</div>
<div class="topic concept nested1" id="concept_r1w_tkp_tt">
 <h2 class="title topictitle2">Expression Examples</h2>

 
 <div class="body conbody"><p class="shortdesc"></p>

        <p class="p">The following tables include some examples of how you might use expressions in the <span class="ph">Data
                  Collector</span>.</p>

        <div class="p">
            <dl class="dl">
                
                    <dt class="dt dlterm">Conditions</dt>

                    <dd class="dd">The following table includes some examples of conditions:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_r1w_tkp_tt__table_zhy_jmp_tt" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr>
                                        <th class="entry" valign="top" width="55.55555555555556%" id="d181836e128">Sample Condition Expressions</th>

                                        <th class="entry" valign="top" width="44.44444444444444%" id="d181836e131">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e128 ">${record:value('/payment_type') == 'CRD'}</td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e131 ">In a Stream Selector, this condition routes records
                                            where the payment type is credit card to the
                                            stream.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e128 ">${record:value('[3]/State') == "MD"}</td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e131 ">The same as above, but for a record in list
                                            format.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e128 ">${record:errorCode()=="FIELD_MERGER_02"}</td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e131 ">Used in a Stream Selector in an error pipeline, this
                                            condition routes records with the FIELD_MERGER_02 error
                                            to a stream that corrects the error.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e128 ">${record:value("[20]/value") == ""}</td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e131 ">When used in an alert, triggers an alert when the
                                            specified field contains no data.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e128 ">${record:type('/ID')=STRING}</td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e131 ">In the Stream Selector, routes records where the ID
                                            is a String to a branch that includes a Field Type
                                            Converter to convert the field to a numeric data
                                            type.</td>

                                    </tr>

                                </tbody>

                            </table>
</div>
</dd>

                
                
                    <dt class="dt dlterm">if-then-else </dt>

                    <dd class="dd">The following table includes some examples of if-then-else
                            expressions:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_r1w_tkp_tt__table_zrt_lz5_gy" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr>
                                        <th class="entry" valign="top" width="55.55555555555556%" id="d181836e206">Sample if-then-else Expressions</th>

                                        <th class="entry" valign="top" width="44.44444444444444%" id="d181836e209">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e206 ">
                                            <p class="p">${record:value('/gender')=='1'?'M':(record:value('/gender')=='2'?'F':'U')}</p>

                                        </td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e209 ">Replaces 1 with "M", 2 with "F", and any other value
                                            with "U" for unknown. </td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e206 ">
                                            <p class="p">${record:value('/phone_home')!=""?record:value('/phone_home'):(record:value('/phone_mobile')!=""?record:value('/phone_mobile'):(record:value('/phone_work')!=""?record:value('/phone_work'):''))}</p>

                                        </td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e209 ">
                                            <div class="p">The phone number to use for a  primary_phone field
                                                based on phone numbers in the home_phone,
                                                mobile_phone and work_phone fields:<ul class="ul" id="concept_r1w_tkp_tt__ul_plh_pbv_gy">
                                                  <li class="li">If there's a home phone number, use the home
                                                  phone. </li>

                                                  <li class="li">If there's no home phone number, use the
                                                  mobile phone number.</li>

                                                  <li class="li"> If there's no home or mobile phone number,
                                                  use the work phone number.</li>

                                                  <li class="li">If there are no home, mobile, or work numbers,
                                                  use a null value.</li>

                                                </ul>
</div>

                                        </td>

                                    </tr>

                                </tbody>

                            </table>
</div>
</dd>

                
                
                    <dt class="dt dlterm">String manipulation</dt>

                    <dd class="dd">The following table includes some string manipulation examples:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_r1w_tkp_tt__table_wnx_v5s_q5" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr>
                                        <th class="entry" valign="top" width="55.55555555555556%" id="d181836e280">Sample String Manipulation Expressions</th>

                                        <th class="entry" valign="top" width="44.44444444444444%" id="d181836e283">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e280 ">${record:valueOrDefault('/Payment', 'unknown')} </td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e283 ">Replaces missing or null values in the Payment field
                                            with "unknown". </td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e280 ">${str:toUpper(record:value('/STATE')}</td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e283 ">Capitalizes all strings in the STATE field.</td>

                                    </tr>

                                </tbody>

                            </table>
</div>
</dd>

                
                
                    <dt class="dt dlterm">Numeric operation</dt>

                    <dd class="dd">The following table includes an example of a numeric operation:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_r1w_tkp_tt__table_txw_dvs_q5" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr>
                                        <th class="entry" valign="top" width="55.55555555555556%" id="d181836e331">Sample Numeric Operations</th>

                                        <th class="entry" valign="top" width="44.44444444444444%" id="d181836e334">Â </th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr>
                                        <td class="entry" valign="top" width="55.55555555555556%" headers="d181836e331 ">${record:value('/total_amount') -
                                            (record:value('/tip_amount') + record:value('/tolls') +
                                            record:value('/mta_tax'))}</td>

                                        <td class="entry" valign="top" width="44.44444444444444%" headers="d181836e334 ">An expression that calculates trip revenue by
                                            subtracting the tip, taxes, and tolls from the total
                                            fare amount</td>

                                    </tr>

                                </tbody>

                            </table>
</div>
</dd>

                
            </dl>

        </div>

 </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Expression_Language/ExpressionLanguage_title.html" title="Expression Language"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Expression Language</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"><!--

    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

--><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="The Kafka Producer writes data to a Kafka cluster. When you configure a Kafka Producer, you define connection information, the partition strategy, and data format to use. You can add additional Kafka ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Kafka Producer"></meta><meta name="abstract" content="The Kafka Producer writes data to a Kafka cluster."></meta><meta name="description" content="The Kafka Producer writes data to a Kafka cluster."></meta><meta name="DC.Relation" scheme="URI" content="../Destinations/Destinations-title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_oq2_5jl_zq"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Kafka Producer</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Destinations/Destinations-title.html" title="Destinations">Destinations</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Destinations/Destinations-title.html" title="Destinations"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Destinations</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_oq2_5jl_zq">
 <h1 class="title topictitle1">Kafka Producer</h1>

 
 <div class="body conbody"><p class="shortdesc">The Kafka Producer writes data to a Kafka cluster. </p>

  <p class="p">When you configure a Kafka Producer, you define
            connection information, the partition strategy, and data format to use. You can add
            additional Kafka configuration properties as needed.</p>

  <p class="p">The Kafka Producer passes data to partitions in the Kafka topic based on the partition strategy
            that you choose. You can optionally write a batch of records to the Kafka cluster as a
            single message.</p>

 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_lww_3b3_kr">
 <h2 class="title topictitle2">Data Formats</h2>

 <div class="body conbody">
  <p class="p">Kafka Producer writes data to
   Kafkabased on the data format that you select. You can use the following data formats::</p>

  <div class="p">
   <dl class="dl">
    
     <dt class="dt dlterm">Text</dt>

     <dd class="dd">Kafka Producer  writes a single field of a record. When you configure the destination, you
      select the field to use. When necessary, merge data earlier in the pipeline. </dd>

    
    
     <dt class="dt dlterm">JSON</dt>

     <dd class="dd">Kafka Producer writes records as JSON files. You can use one of the following formats:<ul class="ul" id="concept_lww_3b3_kr__ul_dd1_5y1_wr">
       <li class="li">Array - Each file includes a single array. In the array, each element is a JSON
        representation of each record.</li>

       <li class="li">Multiple objects - Each file includes multiple JSON objects. Each object is a JSON
        representation of a record. </li>

      </ul>
</dd>

    
    
     <dt class="dt dlterm">Delimited</dt>

     <dd class="dd">Kafka Producer writes records as delimited files. When you use this data format, you must
      ensure that the data uses the following data structure:<ul class="ul" id="concept_lww_3b3_kr__ul_tr1_ms1_wr">
       <li class="li">A root field that contains an array of maps.</li>

       <li class="li">Each map includes a <dfn class="term">value</dfn> element and an optional <dfn class="term">header</dfn>
        element.</li>

      </ul>
</dd>

    
    
     <dt class="dt dlterm">SDC Record</dt>

     <dd class="dd">Kafka Producer writes data in the SDC Record data format. </dd>

    
   </dl>

  </div>

 </div>

</div>
<div class="topic concept nested1" id="concept_a2p_t4l_zq">
 <h2 class="title topictitle2">Broker List</h2>

 <div class="body conbody">
  <p class="p">The Kafka Producer connects to Kafka based on the topic and
   associated brokers that you specify. To ensure a connection in case a specified broker goes down,
   list as many brokers as possible.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_qpm_xp4_4r">
 <h2 class="title topictitle2">Partition Strategy</h2>

 
 <div class="body conbody"><p class="shortdesc">The partition strategy determines how to write data to Kafka partitions. You can use a
    partition strategy to balance the work load or to write data semantically.</p>

  <div class="p">The Kafka Producer provides the following partition strategies:<dl class="dl">
    
     <dt class="dt dlterm">Round-Robin</dt>

     <dd class="dd">Writes each record to a different partition using a cyclical order. Use for load
            balancing.</dd>

    
    
     <dt class="dt dlterm">Random</dt>

     <dd class="dd">Writes each record to a different partition using a random order. Use for load
            balancing.</dd>

    
    
     <dt class="dt dlterm">Expression</dt>

     <dd class="dd">Writes each record to a partition based on the results of the partition expression. Use to
      perform semantic partitioning. </dd>

     <dd class="dd">When you configure the partition expression, define the expression to evaluate to the
            partition where you want each record written. For example, the following expression
            writes records to two partitions based on the value in the Age
            field:<pre class="pre codeblock">${record:value('/Age') &lt; 21 ? 0 : 1}</pre>
</dd>

          <dd class="dd">The following example writes to three partitions based on the value of the Age
            field:<pre class="pre codeblock">${record:value('/a') &lt; 21 ? 0 : record:value('/a') &lt; 55 ? 1 : 2}</pre>
</dd>

    
   </dl>
</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_tjp_v5l_zq">
 <h2 class="title topictitle2">Additional Kafka Properties</h2>

 
 <div class="body conbody"><p class="shortdesc">You can add custom Kafka configuration properties to the Kafka Producer.</p>

  <p class="p">When you add a Kafka configuration property,
            enter the exact property name and the value. The Kafka Consumer does not validate the
            property names or values.</p>

  <div class="note note"><span class="notetitle">Note:</span> The Kafka Producer uses the broker.host Kafka configuration property. The Kafka Consumer
      ignores user-defined values for this property.</div>

 </div>

</div>
<div class="topic task nested1" id="task_q4d_4yl_zq">
    <h2 class="title topictitle2">Configuring a Kafka Producer</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Configure a Kafka Producer
                to write data to Kafka. </p>

        </div>

        <ol class="ol steps" id="task_q4d_4yl_zq__steps_upj_std_br"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_q4d_4yl_zq__d403e423" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="24.509803921568626%" id="d6662e295">General Property</th>

                                    <th class="entry" valign="top" width="75.49019607843137%" id="d6662e298">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="24.509803921568626%" headers="d6662e295 ">Name</td>

                                    <td class="entry" valign="top" width="75.49019607843137%" headers="d6662e298 ">Stage name.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="24.509803921568626%" headers="d6662e295 ">Description</td>

                                    <td class="entry" valign="top" width="75.49019607843137%" headers="d6662e298 ">Optional description.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="24.509803921568626%" headers="d6662e295 ">Stage Library</td>

                                    <td class="entry" valign="top" width="75.49019607843137%" headers="d6662e298 ">Library version that you want to use. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="24.509803921568626%" headers="d6662e295 ">Required Fields <a class="xref" href="../Pipeline_Configuration/PipelineDesign.html#concept_dnj_bkm_vq" title="You can configure required fields for any processor and most destination stages. A required field must exist in a record to allow the record to enter the stage for processing. When a record does not include a required field, the stage passes the record to the pipeline for error handling.">
                                            <img class="image" id="task_q4d_4yl_zq__d403e478" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                    <td class="entry" valign="top" width="75.49019607843137%" headers="d6662e298 ">Fields that must include data to be passed to the stage.
                                            <div class="note tip"><span class="tiptitle">Tip:</span> You might include fields
                                            that the stage uses.</div>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="24.509803921568626%" headers="d6662e295 ">On Record Error</td>

                                    <td class="entry" valign="top" width="75.49019607843137%" headers="d6662e298 ">Error record handling for the stage: <ul class="ul" id="task_q4d_4yl_zq__d403e493">
                                            <li class="li">Discard - Discards the record.</li>

                                            <li class="li">Send to Error - Sends the record to the pipeline for
                                                error handling.</li>

                                            <li class="li">Stop Pipeline - Stops the pipeline. </li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="keyword wintitle">Kafka</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    <div class="p">
                        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_q4d_4yl_zq__table_wp4_xtd_br" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr class="row">
                                        <th class="entry" valign="top" width="23.980815347721823%" id="d6662e399">Kafka Properties</th>

                                        <th class="entry" valign="top" width="76.01918465227818%" id="d6662e402">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e399 ">Broker URIs</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e402 ">A comma-separated list of URIs for Kafka brokers that
                                            write to the topic. Use the following format:
                                                <samp class="ph codeph">&lt;host&gt;:&lt;port&gt;</samp>.<p class="p">To ensure a
                                                connection, enter additional broker
                                            URIs.</p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e399 ">Topic</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e402 ">Kafka topic to use.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e399 ">Partition Strategy </td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e402 ">Strategy to use to write to partitions:<ul class="ul" id="task_q4d_4yl_zq__ul_tq2_yr3_br">
                                                <li class="li">Round Robin - Takes turns writing to different
                                                  partitions.</li>

                                                <li class="li">Random - Writes to partitions randomly.</li>

                                                <li class="li">Expression - Uses an expression to write data to
                                                  different partitions. </li>

                                            </ul>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e399 ">Expression <a class="xref" href="KProducer.html#concept_qpm_xp4_4r" title="The partition strategy determines how to write data to Kafka partitions. You can use a partition strategy to balance the work load or to write data semantically.">
                                                <img class="image" id="task_q4d_4yl_zq__image_hwy_43h_hr" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e402 ">Expression to use to using the Expression partition
                                            strategy. <p class="p">Define the expression to evaluate to the
                                                partition where you want each record written.
                                                Partitions are numbered 0 - n.</p>
<p class="p">Optionally, click <span class="ph uicontrol">Ctrl + Spacebar</span> to invoke
                  expression completion for help with creating the expression. </p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e399 ">Data Format</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e402 ">Data format for output messages:<ul class="ul" id="task_q4d_4yl_zq__ul_wlj_353_br">
                                                <li class="li">Text</li>

                                                <li class="li">JSON</li>

                                                <li class="li">Delimited</li>

                                                <li class="li">SDC Record <a class="xref" href="../Pipeline_Configuration/SDCRecordFormat.html#concept_qkk_mwk_br" title="SDC Record is a proprietary data format that the Data Collector uses to generate error records. You can also configure a pipeline to read or write SDC Record data.">
                                                  <img class="image" id="task_q4d_4yl_zq__image_ucp_chr_br" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></li>

                                            </ul>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e399 ">Messages Charset</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e402 ">Character encoding to use when writing data. <p class="p">Not
                                                used for the SDC Record data format.</p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e399 ">One Message per Batch</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e402 ">Generates a single message for all records in the
                                            batch.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e399 ">Kafka Configuration</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e402 ">Additional Kafka properties to use. Click the
                                                <span class="ph uicontrol">Add</span> icon and define the Kafka
                                            property name and value. <p class="p">Use the property names and
                                                values as expected by Kafka. Do not use the
                                                broker.list property.</p>
<p class="p">By default, the
                                                queue.buffering.max.ms Kafka property is defined.
                                                You can edit or delete the property. </p>
</td>

                                    </tr>

                                </tbody>

                            </table>
</div>

                    </div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">For text data, on the <span class="ph uicontrol">Text</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_q4d_4yl_zq__d403e897" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="23.980815347721823%" id="d6662e573">Text Property</th>

                                    <th class="entry" valign="top" width="76.01918465227818%" id="d6662e576">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e573 ">Text Field Path</td>

                                    <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e576 ">Field that contains the text data to be written. All data
                                        must be incorporated into the specified field. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="23.980815347721823%" headers="d6662e573 ">Empty Line if No Text</td>

                                    <td class="entry" valign="top" width="76.01918465227818%" headers="d6662e576 ">Creates an empty line when a record does not include the
                                        text field specified above. <p class="p">When not selected, records
                                            without the specified text field are
                                        discarded.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">For JSON data, on the <span class="ph uicontrol">JSON</span> tab, configure the following
                    property:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_q4d_4yl_zq__d403e833" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="28.011204481792717%" id="d6662e630">JSON Property</th>

                                    <th class="entry" valign="top" width="71.98879551820728%" id="d6662e633">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="28.011204481792717%" headers="d6662e630 ">JSON Content</td>

                                    <td class="entry" valign="top" width="71.98879551820728%" headers="d6662e633 ">Determines how JSON data is written:<ul class="ul" id="task_q4d_4yl_zq__d403e862">
                                            <li class="li">JSON Array of Objects - Each file includes a single
                                                array. In the array, each element is a JSON
                                                representation of each record.</li>

                                            <li class="li">Multiple JSON Objects - Each file includes multiple
                                                JSON objects. Each object is a JSON representation
                                                of a record.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">For delimited data, on the <span class="keyword wintitle">Delimited</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_q4d_4yl_zq__d403e754" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="28.328611898016998%" id="d6662e684">Delimited Property</th>

                                    <th class="entry" valign="top" width="71.671388101983%" id="d6662e687">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="28.328611898016998%" headers="d6662e684 ">CSV Format</td>

                                    <td class="entry" valign="top" width="71.671388101983%" headers="d6662e687 ">Format for delimited data:<ul class="ul" id="task_q4d_4yl_zq__ul_k3j_vvf_jr">
                        <li class="li"><span class="ph uicontrol">Default CSV</span> - File that includes comma-separated
                              values. Ignores empty lines in the file.</li>

                        <li class="li"><span class="ph uicontrol">RFC4180 CSV</span> - Comma-separated file that strictly
                              follows RFC4180 guidelines.</li>

                        <li class="li"><span class="ph uicontrol">MS Excel CSV</span> - Microsoft Excel comma-separated
                              file.</li>

                        <li class="li"><span class="ph uicontrol">MySQL CSV</span> - MySQL comma separated file.</li>

                        <li class="li"><span class="ph uicontrol">Tab-Separated Values</span> - File that includes
                              tab-separated values.</li>

                  </ul>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="28.328611898016998%" headers="d6662e684 ">Header Line</td>

                                    <td class="entry" valign="top" width="71.671388101983%" headers="d6662e687 ">Indicates whether to create a header line.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="28.328611898016998%" headers="d6662e684 ">Remove New Line Characters</td>

                                    <td class="entry" valign="top" width="71.671388101983%" headers="d6662e687 ">Removes new line characters from within a record.
                                            <p class="p">Recommended when writing data as a single line of
                                            text.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Destinations/Destinations-title.html" title="Destinations"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Destinations</span></a></span>  </div><div class="footer"><div> </div><!-- Â© <a href="http://creativecommons.org/licenses/by-nc/4.0/legalcode">CC BY-NC 4.0.</a> StreamSets, 2015. --></div>
</body>
</html>
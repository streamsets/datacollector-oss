
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="The JDBC Query Consumer origin reads database data using a user-defined SQL query through a JDBC connection. The origin returns data as a map with column names and field values. When you configure the ..." /><meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="JDBC Query Consumer" /><meta name="DC.Relation" scheme="URI" content="../Origins/Origins_title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_qhf_hjr_bs" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>JDBC Query Consumer</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Origins/Origins_title.html" title="Origins">Origins</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Origins/Origins_title.html" title="Origins"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Origins</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_qhf_hjr_bs">
 <h1 class="title topictitle1">JDBC Query Consumer</h1>

 <div class="body conbody">
        <p class="p">The JDBC Query
            Consumer origin reads database data using a user-defined SQL query through a JDBC
            connection. The origin returns data as a map with column names and field values.</p>

        <p class="p">When you configure the origin, you define the SQL query that the origin uses to read data
            from a single table or from a join of tables.</p>

        <div class="note note"><span class="notetitle">Note:</span> To read from multiple tables in the same database, use the JDBC Multitable Consumer
            origin. The origin generates SQL queries based on the table configurations that you
            define. You might want to use the <a class="xref" href="MultiTableJDBCConsumer.html#concept_zp3_wnw_4y" title="You define the group of tables that the JDBC Multitable Consumer origin reads by defining a table name pattern for the table configuration. The origin reads all tables whose names match the pattern. The JDBC Multitable Consumer origin uses an offset column and initial offset value to determine where to start reading data within tables and partitions.The JDBC Multitable Consumer origin can read from views in addition to tables. You can define the initial order that the origin uses to read the tables.">JDBC Multitable Consumer</a> origin for database
            replication.</div>

        <p class="p">When you configure JDBC Query Consumer, you specify connection information, query
            interval, and custom JDBC configuration properties to determine how the origin connects
            to the database. You configure the query mode and SQL query to define the data returned
            by the database. You can also call stored procedures from the SQL query.</p>

        <p class="p">You can configure the JDBC Query Consumer to perform change data capture for databases
            that store the information in a table. <span class="ph">And you can specify what the origin does when
                        encountering an unsupported data type: convert the data to string or stop
                        the pipeline.</span></p>

        <p class="p">You can also configure custom properties that your driver requires. <span class="ph">To use a JDBC version older than
                        4.0, you can specify the driver class name and define a health check
                        query.</span></p>

        <p class="p">By default, the origin creates JDBC header attributes to provide information about source
            data in record headers. </p>

        <div class="p">
            <div class="note note"><span class="notetitle">Note:</span> The ability to process Microsoft SQL Server CDC data is deprecated in
                this origin and will be removed in a future release. To process data from Microsoft
                SQL Server CDC tables, use the <a class="xref" href="SQLServerCDC.html#concept_ut3_ywc_v1b" title="You can define the initial order that the origin uses to read the tables.">SQL Server CDC Client origin</a>. To process data from Microsoft SQL Server
                change tracking tables, use the <a class="xref" href="SQLServerChange.html#concept_ewq_b2s_r1b" title="You can define the initial order that the origin uses to read the tables.">SQL Server Change Tracking
                    origin</a>.</div>

        </div>

        <p class="p">The origin can generate events for an event stream. For
                  more information about dataflow triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>. </p>

    </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_aq1_lxp_fs">
  <h2 class="title topictitle2">Installing the JDBC Driver</h2>

  <div class="body conbody">
    <p class="p">Before you use the JDBC Query Consumer, <span class="ph">install the JDBC driver for the database. You cannot access
                        the database until you install the required driver. </span></p>

    <p class="p"><span class="ph">For information about installing additional drivers, see
                              <a class="xref" href="../Configuration/ExternalLibs.html#concept_pdv_qlw_ft" title="After you've set up the external directory, use the Package Manager within Data Collector to install external libraries.To manually install external libraries, use the required procedure for your installation type.">Install External Libraries</a>.</span></p>

  </div>

</div>
<div class="topic concept nested1" id="concept_nxz_2kz_bs">
 <h2 class="title topictitle2">Offset Column and Offset Value</h2>

 
 <div class="body conbody"><p class="shortdesc">JDBC Query Consumer uses an offset column and initial offset value to determine where to
        start reading data within a table. Include both the offset column and the offset value in
        the WHERE clause of the SQL query. </p>

  <p class="p">Ideally, the offset column is a column in the
            table with unique values, such as a primary key or indexed column. The initial offset
            value is a value within the offset column where you want JDBC Query Consumer to start
            reading.</p>

        <p class="p">When the origin performs an incremental query, you must configure the offset column and
            offset value. For full queries, you can optionally configure them.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_ets_gnr_bs">
 <h2 class="title topictitle2">Full and Incremental Mode</h2>

 <div class="body conbody">
  <p class="p">JDBC Query Consumer can
                        perform queries in two modes:</p>

  <div class="p">
   <dl class="dl">
    
     <dt class="dt dlterm">Incremental mode</dt>

     <dd class="dd">When the JDBC Query Consumer performs an incremental query, it uses the initial offset as
                                                the offset value in the first SQL query. As the
                                                origin completes processing the results of the first
                                                query, it saves the last offset value that it
                                                processes. Then it waits the specified query
                                                interval before performing a subsequent query. </dd>

                                        <dd class="dd">When the origin performs a subsequent query, it returns
                                                data based on the last-saved offset. You can reset
                                                the origin to use the initial offset value. </dd>

     <dd class="dd">Use incremental mode for append-only tables or when you do not need to capture changes to
            older rows. By default, JDBC Query Consumer uses incremental mode. </dd>

    
    
     <dt class="dt dlterm">Full mode</dt>

     <dd class="dd">When the JDBC Query Consumer origin performs a full query, it runs the specified SQL query.
                                                If you optionally configure the offset column and
                                                initial offset value, the origin uses the initial
                                                offset as the offset value in the SQL query each
                                                time it requests data.</dd>

                                        <dd class="dd">When the origin completes processing the results of the
                                                full query, it waits the specified query interval,
                                                and then performs the same query again. </dd>

     <dd class="dd">Use full mode to capture all row updates. You might use a Record Deduplicator in the
            pipeline to minimize repeated rows. Not ideal for large tables.</dd>

                                        <dd class="dd">
                                                <div class="note tip"><span class="tiptitle">Tip:</span> If you want to process the results
                                                  from a single full query and then stop the
                                                  pipeline, you can enable the origin to generate
                                                  events and use the Pipeline Finisher to stop the
                                                  pipeline automatically. For more information, see
                                                  <a class="xref" href="JDBCConsumer.html#concept_o1c_kwr_kz">Event Generation</a>.</div>

                                        </dd>

    
   </dl>

  </div>

 </div>

</div>
<div class="topic concept nested1" id="concept_hcm_gdq_ds">
 <h2 class="title topictitle2">Recovery</h2>

 
 <div class="body conbody"><p class="shortdesc"> JDBC Query Consumer supports recovery after a deliberate or unexpected stop when it
    performs incremental queries. Recovery is not supported for full queries.</p>

  <p class="p">In incremental mode, JDBC Query Consumer uses offset
      values in the offset column to determine where to continue processing after a deliberate or
      unexpected stop. To ensure seamless recovery in incremental mode, use a primary key or indexed
      column as the offset column. As JDBC Query Consumer processes data, it tracks the offset value
      internally. When the pipeline stops, JDBC Query Consumer notes where it stopped processing
      data. When you restart the pipeline, it continues from the last-saved offset. </p>

    <p class="p">When JDBC Query Consumer performs full queries, the origin runs the full query again after
      you restart the pipeline.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_uj4_mxy_bs">
  <h2 class="title topictitle2">SQL Query</h2>

  <div class="body conbody">
    <p class="p">The SQL query defines the data returned from the database.
      The SQL query guidelines depend on whether you configure the origin to perform an incremental
      or full query.</p>

  </div>

<div class="topic concept nested2" id="concept_cbn_pbw_zw">
 <h3 class="title topictitle3">SQL Query for Incremental Mode</h3>

 
 <div class="body conbody"><p class="shortdesc">When you define the SQL query for incremental mode, JDBC Query Consumer requires a WHERE
        and ORDER BY clause in the query. </p>

  <p class="p">Use the following guidelines when you define the WHERE and ORDER BY clauses in the query:</p>

     <dl class="dl">
         
             <dt class="dt dlterm">In the WHERE clause, include the offset column and the offset value</dt>

             <dd class="dd">The origin uses an offset column and value to determine the data that is returned.
                 Include both in the WHERE clause of the query. </dd>

         
         
             <dt class="dt dlterm">Use the OFFSET constant to represent the offset value</dt>

             <dd class="dd">In the WHERE clause, use ${OFFSET} to represent the offset value. </dd>

             <dd class="dd">For example, when you start a pipeline, the following query returns all data from the
                 table where the data in the offset column is greater than the initial offset
                 value:<pre class="pre codeblock">SELECT * FROM &lt;tablename&gt; WHERE &lt;offset column&gt; &gt; ${OFFSET}</pre>
<div class="note tip"><span class="tiptitle">Tip:</span> When the offset values are strings, enclose ${OFFSET} in single quotation
                     marks.</div>
</dd>

         
         
             <dt class="dt dlterm">In the ORDER BY clause, include the offset column as the first column</dt>

             <dd class="dd">To avoid returning duplicate data, use the offset column as the first column in the
                 ORDER BY clause.</dd>

             <dd class="dd">
                 <div class="note note"><span class="notetitle">Note:</span> Using column that is not a primary key or indexed column in the ORDER BY clause
                     can slow performance.</div>

             </dd>

         
     </dl>

        <div class="p">For example, the following query for incremental mode returns data from an Invoice table
            where the ID column is the offset column. The query returns all data where the ID is
            greater than the offset and orders the data by the
            ID:<pre class="pre codeblock"> SELECT * FROM invoice WHERE id &gt; ${OFFSET} ORDER BY id</pre>
</div>

 </div>

</div>
<div class="topic concept nested2" id="concept_yh1_zbw_zw">
 <h3 class="title topictitle3">SQL Query for Full Mode</h3>

 
 <div class="body conbody"><p class="shortdesc">You can define any type of SQL query for full mode. </p>

        <div class="p">For example, you can run the following query to return all data from an Invoice
            table:<pre class="pre codeblock">SELECT * FROM invoice</pre>
</div>

  <p class="p">When you define the SQL query for full mode, you can optionally include the WHERE and ORDER BY
            clauses using the same guidelines as for incremental mode. However, using these clauses
            to read from large tables can cause performance issues.</p>

 </div>

</div>
<div class="topic concept nested2" id="concept_fll_lvk_bx">
 <h3 class="title topictitle3">Stored Procedures</h3>

 <div class="body conbody">
  <p class="p">You can use stored procedures with the
            JDBC Query Consumer origin. </p>

        <p class="p">You can call stored procedures from the SQL query when using JDBC Query Consumer in full
            mode. Do not call stored procedures when using the origin in incremental mode. </p>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_egw_d4c_kw">
 <h2 class="title topictitle2">JDBC Record Header Attributes </h2>

 <div class="body conbody">
        <p class="p">The JDBC Query
            Consumer generates JDBC record header attributes that provide additional information
            about each record, such as the original data type of a field or the source tables for
            the record. The origin receives these details from the JDBC driver. </p>

        <p class="p">You can use the record:attribute or record:attributeOrDefault functions to
            access the information in the attributes. For more information about working with record
            header attributes, see <a class="xref" href="../Pipeline_Design/RecordHeaderAttributes.html#concept_rd2_ghz_dz">Working with Header Attributes</a>.</p>

            
        <p class="p">JDBC header attributes include a user-defined prefix to differentiate the JDBC header
            attributes from other record header attributes. By default, the prefix is "jdbc". You
            can change the prefix that the origin uses and you can configure the origin not to
            create JDBC header attributes.</p>

      
        <div class="p">The origin can provide the following JDBC header attributes:
        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_egw_d4c_kw__d43691e26" class="table" frame="border" border="1" rules="all">
                
                
                <thead class="thead" align="left">
                    <tr>
                        <th class="entry" valign="top" width="40%" id="d278881e428">JDBC Header Attribute</th>

                        <th class="entry" valign="top" width="60%" id="d278881e431">Description</th>

                    </tr>

                </thead>

                <tbody class="tbody">
                    <tr id="concept_egw_d4c_kw__d43691e48">
                            <td class="entry" valign="top" width="40%" headers="d278881e428 "> &lt;JDBC prefix&gt;.tables</td>

                            <td class="entry" id="concept_egw_d4c_kw__d43691e53" valign="top" width="60%" headers="d278881e431 ">Provides a comma-separated list of source
                                tables for the fields in the record.<div class="note note"><span class="notetitle">Note:</span> Not all JDBC drivers
                                    provide this information.</div>
<p class="p"><span class="ph">Oracle uses all caps for schema, table, and column names by
                        default. Names can be lower- or mixed-case only if the schema, table, or
                        column was created with quotation marks around the name.</span></p>
</td>

                        </tr>

                    <tr>
                            <td class="entry" valign="top" width="40%" headers="d278881e428 ">&lt;JDBC prefix&gt;.&lt;column name&gt;.jdbcType</td>

                            <td class="entry" id="concept_egw_d4c_kw__d43691e66" valign="top" width="60%" headers="d278881e431 ">Provides the original SQL data type for each
                                field in the record.</td>

                        </tr>

                    <tr>
                            <td class="entry" valign="top" width="40%" headers="d278881e428 ">&lt;JDBC prefix&gt;.&lt;column name&gt;.precision</td>

                            <td class="entry" id="concept_egw_d4c_kw__d43691e75" valign="top" width="60%" headers="d278881e431 ">Provides the original precision for all
                                numeric and decimal fields. </td>

                        </tr>

                    <tr>
                            <td class="entry" valign="top" width="40%" headers="d278881e428 ">&lt;JDBC prefix&gt;.&lt;column name&gt;.scale</td>

                            <td class="entry" id="concept_egw_d4c_kw__d43691e84" valign="top" width="60%" headers="d278881e431 ">Provides the original scale for all numeric
                                and decimal fields. </td>

                        </tr>

                </tbody>

            </table>
</div>

        </div>

    </div>

<div class="topic concept nested2" id="concept_tvf_tgp_fx">
 <h3 class="title topictitle3">Header Attributes with the Drift Synchronization Solution</h3>

 <div class="body conbody">
  <p class="p">When you use the JDBC Query Consumer with the
            Drift Synchronization Solution, ensure that the origin creates JDBC header attributes. </p>

        <p class="p">JDBC header attributes allow the Hive Metadata processor to use the precision and scale
            information in the attributes to define decimal fields.</p>

        <div class="p">To enable the Hive Metadata processor to define decimal fields as needed, perform the
            following steps:<ol class="ol" id="concept_tvf_tgp_fx__ul_bbf_bmp_fx">
                <li class="li">In the JDBC Query Consumer, on the <span class="keyword wintitle">Advanced</span> tab, make sure
                    that <span class="ph uicontrol">Create JDBC Header Attributes</span> is selected.</li>

                <li class="li">On the same tab, you can optionally configure <span class="ph uicontrol">JDBC Header
                        Prefix</span>. </li>

                <li class="li">In the Hive Metadata processor, if necessary, configure the <span class="ph uicontrol">Decimal
                        Precision Expression</span> and <span class="ph uicontrol">Decimal Scale
                        Expression</span> properties on the <span class="ph uicontrol">Hive</span> tab.
                        <p class="p">If you changed the default value for JDBC Header Prefix in the JDBC Query
                        Consumer, then update the "jdbc." string in the expressions to use the
                        correct JDBC Header Prefix.</p>
<p class="p">If you did not change the JDBC Header
                        Prefix default value, then use the default expressions for the
                        properties.</p>
</li>

            </ol>
</div>

 </div>

    <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br />
<div class="related_link"><a class="navheader_parent_path" href="../Hive_Drift_Solution/HiveDriftSolution_title.html#concept_phk_bdf_2w" title="Drift Synchronization Solution for Hive">Drift Synchronization Solution for Hive</a></div>
</div>
</div>
</div>
</div>
<div class="topic concept nested1" id="concept_tyd_gbf_5y">
 <h2 class="title topictitle2">CDC for Microsoft SQL Server</h2>

 <div class="body conbody">
  <div class="p">
            <div class="note important"><span class="importanttitle">Important:</span> This functionality is deprecated and will be removed in a future
                release. To process data from Microsoft SQL Server CDC tables, use the <a class="xref" href="SQLServerCDC.html#concept_ut3_ywc_v1b" title="You can define the initial order that the origin uses to read the tables.">SQL Server CDC Client
                origin</a>. To process data from Microsoft SQL Server change tracking tables, use
                the <a class="xref" href="SQLServerChange.html#concept_ewq_b2s_r1b" title="You can define the initial order that the origin uses to read the tables.">SQL Server Change Tracking
                    origin</a>.</div>

        </div>

        <p class="p">You can use the JDBC Query Consumer to process change capture data from Microsoft SQL
            Server. </p>

        <div class="p">To process Microsoft SQL Server changed capture data, perform the following tasks: <ol class="ol" id="concept_tyd_gbf_5y__ol_vkk_1nf_5y">
                <li class="li">In the JDBC Query Consumer origin, on the <span class="keyword wintitle">JDBC</span> tab, make
                    sure <span class="ph uicontrol">Incremental Mode</span> is enabled. </li>

                <li class="li">Configure the <span class="ph uicontrol">Offset Column</span> property to use
                        <span class="ph uicontrol">__$start_lsn</span>. <p class="p">Microsoft SQL Server uses
                        _$start_lsn as the offset column in change data capture tables. </p>
</li>

                <li class="li">Configure the <span class="ph uicontrol">Initial Offset</span> property. <p class="p">This determines
                        where the origin starts the read when you start the pipeline. To read all
                        available data, set it to 0. </p>
</li>

                <li class="li">Configure the <span class="ph uicontrol">SQL Query</span> property: <div class="p">
                        <ul class="ul" id="concept_tyd_gbf_5y__ul_ew5_3vf_5y">
                            <li class="li">In the SELECT statement, use the CDC table name. </li>

                            <li class="li">In the WHERE clause, use __$start_lsn as the offset column, and
                                since __$start_lsn stores the offset in binary format, add a command
                                to convert the integer offset to Binary(10).</li>

                            <li class="li">In the ORDER BY clause, use __$start_lsn as the offset column and
                                optionally specify reading in ascending or descending order. By
                                default, the origin reads in ascending order. </li>

                        </ul>

                    </div>
<div class="p">The following query summarizes these points:
                        <pre class="pre codeblock">SELECT * from &lt;CDC table name&gt;
WHERE __$start_lsn &gt; CAST(0x${OFFSET} as binary(10))
ORDER BY __$start_lsn &lt;ASC | DESC&gt;</pre>
</div>
</li>

                <li class="li">If you want to group row updates from the same transaction, configure the
                    properties on the <span class="ph uicontrol">Change Data Capture</span> tab: <ul class="ul" id="concept_tyd_gbf_5y__ul_aml_25f_5y">
                        <li class="li">For the <span class="ph uicontrol">Transaction ID Column Name</span> use
                                <span class="ph uicontrol">__$start_lsn</span>. The __$start_lsn column
                            includes transaction information in the offset. </li>

                        <li class="li">Set the <span class="ph uicontrol">Max Transaction Size</span>. This property
                            overrides the <span class="ph">Data
                  Collector</span> maximum batch size. For more information about both of these
                            properties, see <a class="xref" href="JDBCConsumer.html#concept_e1j_jwv_ht">Group Rows by Transaction</a>.</li>

                    </ul>
</li>

            </ol>
</div>

 </div>

<div class="topic concept nested2" id="concept_bnh_hry_ty">
 <h3 class="title topictitle3">CRUD Record Header Attribute</h3>

 <div class="body conbody">
        <p class="p">When reading change capture data from Microsoft
            SQL Server, the JDBC Query Consumer origin includes the CRUD operation type in the
            sdc.operation.type record header attribute. </p>

        <p class="p">If you use a CRUD-enabled destination in the pipeline such as
                  JDBC Producer or Elasticsearch, the destination can use the operation type when
                  writing to destination systems. When necessary, you can use an Expression
                  Evaluator or scripting processors to manipulate the value in the
                  sdc.operation.type header attribute. For an overview of <span class="ph">Data
                  Collector</span> changed data processing and a list
                  of CRUD-enabled destinations, see <a class="xref" href="../Pipeline_Design/CDC-Overview.html#concept_apw_l2c_ty">Processing Changed Data</a>.</p>

        <div class="p">The origin uses the following values in the sdc.operation.type record header attribute to
            represent the operation type: <ul class="ul" id="concept_bnh_hry_ty__ul_dkt_g5l_dy">
                <li class="li">1 for INSERT</li>

                <li class="li">2 for DELETE</li>

                <li class="li">3 for UPDATE</li>

                <li class="li">5 for unsupported codes</li>

            </ul>
</div>

 </div>

</div>
<div class="topic concept nested2" id="concept_e1j_jwv_ht">
 <h3 class="title topictitle3">Group Rows by Transaction</h3>

 <div class="body conbody">
  <p class="p">When reading from Microsoft SQL Server, JDBC Query Consumer can
   group row updates from the same transaction when reading from a change log table. This maintains
   consistency when performing change data capture.</p>

  <p class="p">To enable this feature, specify the transaction ID column and maximum transaction size. When
   these properties are defined, JDBC Query Consumer processes data as a batch up to the maximum
   transaction size, overriding the <span class="ph">Data
                  Collector</span> maximum batch
   size.</p>

  <p class="p">When the transaction is larger than the maximum transaction size, JDBC Query Consumer uses
   multiple batches as needed.</p>

  <p class="p">To preserve transactional integrity, increase the maximum transaction size as necessary. Note
   that setting this property too high can cause out of memory errors. </p>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_o1c_kwr_kz">
 <h2 class="title topictitle2">Event Generation</h2>

 <div class="body conbody">
        <p class="p">The JDBC Query
            Consumer origin <span class="ph"><span class="ph" id="concept_o1c_kwr_kz__d42523e2148">can generate events that you can use in an event stream. When you
                              enable event generation, the origin generates an event when it
                              completes processing the data returned by the specified</span> query.
                  </span> The origin also generates an event when a query completes successfully and
            when it fails to complete.</p>

        <div class="p">JDBC Query Consumer events can be used in any logical way. For example: <ul class="ul" id="concept_o1c_kwr_kz__ul_i2s_3h1_4z">
                <li class="li">With the Pipeline Finisher executor to stop the pipeline and transition the
                    pipeline to a Finished state when the origin completes processing available
                        data.<p class="p">When you restart a pipeline stopped by the Pipeline Finisher
                        executor, the origin processes data based on how you configured the origin.
                        For example, if you configure the origin to run in incremental mode, the
                        origin saves the offset when the executor stops the pipeline. When it
                        restarts, the origin continues processing from the last-saved offset. In
                        contrast, if you configure the origin to run in full mode, when you restart
                        the pipeline, the origin uses the initial offset, if specified.</p>
<p class="p">For an
                        example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_kff_ykv_lz">Case Study: Stop the Pipeline</a>.</p>
</li>

                <li class="li">With the Email executor to send a custom email
                              after receiving an event.<p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_t2t_lp5_xz">Case Study: Sending Email</a>.</p>
</li>

            </ul>
<ul class="ul" id="concept_o1c_kwr_kz__ul_cjg_c3s_kz">
                        <li class="li">
                              <p class="p">With a destination to store information about completed queries. </p>

                              <p class="p">For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_ocb_nnl_px">Case Study: Event Storage</a>.</p>

                        </li>

                  </ul>
</div>

     <p class="p"><span class="ph">For more information about dataflow
                        triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>.</span></p>

 </div>

<div class="topic concept nested2" id="concept_rzl_s1t_kz">
 <h3 class="title topictitle3">Event Record</h3>

 <div class="body conbody">
        <div class="p">Event records generated by JDBC Query
            Consumer origin have the following event-related record header attributes:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_rzl_s1t_kz__table_brz_3gp_qx" class="table" frame="border" border="1" rules="all">
                    
                    
                    <thead class="thead" align="left">
                        <tr>
                            <th class="entry" valign="top" width="30%" id="d278881e858">Record Header Attribute</th>

                            <th class="entry" valign="top" width="70%" id="d278881e861">Description</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr>
                            <td class="entry" valign="top" width="30%" headers="d278881e858 ">sdc.event.type</td>

                            <td class="entry" valign="top" width="70%" headers="d278881e861 ">Event type. Uses one of the following types:<ul class="ul" id="concept_rzl_s1t_kz__ul_m12_mgp_qx">
                                    <li class="li">no-more-data - Generated when the origin completes processing
          all data returned by a query.</li>

                                    <li class="li">jdbc-query-success - Generated when the origin successfully
                                        completes a query.</li>

                                    <li class="li">jdbc-query-failure - Generated when the origin fails to
                                        complete a query.</li>

                                </ul>
</td>

                        </tr>

                        <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e858 ">sdc.event.version</td>

       <td class="entry" valign="top" width="70%" headers="d278881e861 ">An integer that indicates the version of the event record type.</td>

      </tr>

                        <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e858 ">sdc.event.creation_timestamp</td>

       <td class="entry" id="concept_rzl_s1t_kz__d42622e2086" valign="top" width="70%" headers="d278881e861 ">Epoch timestamp when the stage created the event.
       </td>

      </tr>

                    </tbody>

                </table>
</div>
</div>

        <div class="p">The origin can generate the following types of event records:<dl class="dl">
                
                    <dt class="dt dlterm">No-more-data</dt>

                    <dd class="dd">The origin generates a no-more-data event record when it completes
                        processing all data returned by a query. </dd>

                    <dd class="dd">The no-more-data event records have the <samp class="ph codeph">sdc.event.type</samp>
                        record header attribute set to <samp class="ph codeph">no-more-data</samp> and include no
                        additional fields. </dd>

                
                
                    <dt class="dt dlterm">Query success</dt>

                    <dd class="dd">The origin generates a query success event record when it completes
                        processing the data returned from a query. </dd>

                    <dd class="dd">The query success event records have the <samp class="ph codeph">sdc.event.type</samp>
                        record header attribute set to <samp class="ph codeph">jdbc-query-success</samp> and
                        include the following fields:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_rzl_s1t_kz__table_dh2_5gc_rx" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr>
                                        <th class="entry" valign="top" width="30%" id="d278881e959">Field</th>

                                        <th class="entry" valign="top" width="70%" id="d278881e962">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e959 ">query</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e962 ">Query that completed successfully.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e959 ">timestamp</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e962 ">Timestamp when the query completed.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e959 ">row-count</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e962 ">Number of processed rows.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e959 ">source-offset</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e962 ">Offset after the query completed.</td>

                                    </tr>

                                </tbody>

                            </table>
</div>
</dd>

                
                
                    <dt class="dt dlterm">Query failure</dt>

                    <dd class="dd">The origin generates a query failure event record when it fails to complete
                        processing the data returned from a query. </dd>

                    <dd class="dd">The query failure event records have the <samp class="ph codeph">sdc.event.type</samp>
                        record header attribute set to <samp class="ph codeph">jdbc-query-failure</samp> and
                        include the following fields:</dd>

                    <dd class="dd">
                        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_rzl_s1t_kz__table_ck5_mht_kz" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr>
                                        <th class="entry" valign="top" width="30%" id="d278881e1040">Field</th>

                                        <th class="entry" valign="top" width="70%" id="d278881e1043">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e1040 ">query</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e1043 ">Query that failed to complete.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e1040 ">timestamp</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e1043 ">Timestamp when the query failed to complete.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e1040 ">row-count</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e1043 ">Number of records from the query that were
                                            processed.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e1040 ">source-offset</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e1043 ">Origin offset after query failure.</td>

                                    </tr>

                                    <tr>
                                        <td class="entry" valign="top" width="30%" headers="d278881e1040 ">error</td>

                                        <td class="entry" valign="top" width="70%" headers="d278881e1043 ">First error message.</td>

                                    </tr>

                                </tbody>

                            </table>
</div>

                    </dd>

                
            </dl>
</div>

 </div>

</div>
</div>
<div class="topic task nested1" id="task_ryz_tkr_bs">
    <h2 class="title topictitle2">Configuring a JDBC Query Consumer</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Configure a JDBC Query Consumer
                origin to use a single configured SQL query to read database data through a JDBC
                connection. </p>

        </div>

        <ol class="ol steps" id="task_ryz_tkr_bs__steps_hhn_vkr_bs"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__table_ac1_hss_5x" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d278881e1146">General Property</th>

                                    <th class="entry" valign="top" width="70%" id="d278881e1149">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1146 ">Name</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1149 ">Stage name.</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1146 ">Description</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1149 ">Optional description.</td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1146 ">Produce Events <a class="xref" href="JDBCConsumer.html#concept_o1c_kwr_kz">
                                            <img class="image" id="task_ryz_tkr_bs__image_plp_tp2_px" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1149 ">Generates event records when events occur. Use for event
        handling. <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">
         <img class="image" id="task_ryz_tkr_bs__d42622e794" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1146 ">On Record Error <a class="xref" href="../Pipeline_Design/ErrorHandling.html#concept_atr_j4y_5r">
         <img class="image" id="task_ryz_tkr_bs__d42622e803" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

       <td class="entry" valign="top" width="70%" headers="d278881e1149 ">Error record handling for the stage: <ul class="ul" id="task_ryz_tkr_bs__d42622e807">
         <li class="li">Discard - Discards the record.</li>

         <li class="li">Send to Error - Sends the record to the pipeline for error handling.</li>

         <li class="li">Stop Pipeline - Stops the pipeline. </li>

        </ul>
</td>

      </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="keyword wintitle">JDBC</span> tab, configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__table_nkm_dlr_bs" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="22.22222222222222%" id="d278881e1242">JDBC Property</th>

                                    <th class="entry" valign="top" width="77.77777777777779%" id="d278881e1245">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
       <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">JDBC Connection String</td>

       <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Connection string to use to connect to the database.<p class="p">Some databases, such as
         Postgres, require the schema in the connection string. Use the connection string format
         required by the database.</p>
</td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Incremental Mode <a class="xref" href="JDBCConsumer.html#concept_ets_gnr_bs"><img class="image" id="task_ryz_tkr_bs__image_mm5_tvg_cs" src="../Graphics/icon_moreInfo.png" height="12" width="12" />
                                        </a></td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Defines how JDBC Query Consumer queries the database.
                                        Select to perform incremental queries. Clear to perform full
                                        queries. <p class="p">To process CDC data from Microsoft SQL Server,
                                            select this option. For more information about CDC for
                                            Microsoft SQL Server, see <a class="xref" href="JDBCConsumer.html#concept_tyd_gbf_5y">CDC for Microsoft SQL Server</a>.</p>
<p class="p">Default is incremental mode. </p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">SQL Query <a class="xref" href="JDBCConsumer.html#concept_uj4_mxy_bs" title="When you define the SQL query for incremental mode, JDBC Query Consumer requires a WHERE and ORDER BY clause in the query. You can define any type of SQL query for full mode."><img class="image" id="task_ryz_tkr_bs__image_yxz_srq_ds" src="../Graphics/icon_moreInfo.png" height="12" width="12" />
                                        </a></td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">SQL query to use when reading data from the database. <div class="p">
                                            <div class="note note"><span class="notetitle">Note:</span> <span class="ph">Oracle uses all caps for schema, table, and column names by
                        default. Names can be lower- or mixed-case only if the schema, table, or
                        column was created with quotation marks around the name.</span></div>

                                        </div>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Initial Offset </td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Offset value to use when the pipeline starts.<p class="p">Required
                                            in incremental mode.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Offset Column <a class="xref" href="JDBCConsumer.html#concept_nxz_2kz_bs" title="JDBC Query Consumer uses an offset column and initial offset value to determine where to start reading data within a table. Include both the offset column and the offset value in the WHERE clause of the SQL query."><img class="image" id="task_ryz_tkr_bs__image_rqs_srq_ds" src="../Graphics/icon_moreInfo.png" height="12" width="12" />
                                        </a></td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Column to use for the offset value.<p class="p">Required in
                                            incremental mode.</p>
</td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Query Interval</td>

       <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Amount of time to wait between queries. Enter an expression based on a unit of time.
        You can use SECONDS, MINUTES, or HOURS.<p class="p">Default is 10 seconds: ${10 * SECONDS}.
        </p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Use Credentials</td>

       <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Enables entering credentials on the Credentials tab. Use when you do not include
        credentials in the JDBC connection string.</td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Root Field Type</td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Root field type to use for generated records. Use the
                                        default List-Map option unless using the origin in a
                                        pipeline built with <span class="ph">Data
                  Collector</span> version 1.1.0 or earlier.</td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Max Batch Size (records)</td>

       <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Maximum number of records to include in a batch.</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Max Clob Size (characters)</td>

       <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Maximum number of characters to be read in a Clob field. Larger data is
        truncated.</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Max Blob Size (bytes)</td>

       <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">
        <p class="p">Maximum number of bytes to be read in a Blob field. </p>

       </td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Number of Retries on SQL Error</td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Number of times the origin tries to execute the query
                                        after receiving an SQL error. After retrying this number of
                                        times, the origin handles the error based on the error
                                        handling configured for the origin.<p class="p">Use to handle
                                            transient network or connection issues that prevent the
                                            origin from submitting a query.</p>
<p class="p">Default is 0.
                                        </p>
</td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="22.22222222222222%" headers="d278881e1242 ">Additional JDBC Configuration Properties</td>

       <td class="entry" valign="top" width="77.77777777777779%" headers="d278881e1245 ">Additional JDBC configuration properties to use. To add properties, click
         <span class="ph uicontrol">Add</span> and define the JDBC property name and value. <p class="p">Use the property
         names and values as expected by JDBC. </p>
</td>

      </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To enter JDBC credentials separately from the JDBC connection string, on the
                        <span class="ph uicontrol">Credentials</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__d42825e3611" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d278881e1453">Credentials Property</th>

                                    <th class="entry" valign="top" width="70%" id="d278881e1456">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1453 ">Username</td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1456 ">User name for the JDBC connection.</td>

                                </tr>

                                <tr id="task_ryz_tkr_bs__d42825e3642">
                                    <td class="entry" valign="top" width="30%" headers="d278881e1453 ">Password</td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1456 ">Password for the JDBC account.<div class="note tip"><span class="tiptitle">Tip:</span> To secure sensitive information such as
                  usernames and passwords, you can use <a class="xref" href="../Pipeline_Configuration/RuntimeValues.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure sensitive information. Use runtime resources to load sensitive information from files at runtime.">runtime resources</a> or <span class="ph"><a class="xref" href="../Configuration/CredentialStores.html#concept_bt1_bpj_r1b" title="Data Collector pipeline stages communicate with external systems to read and write data. Many of these external systems require credentials - user names or passwords - to access the data. When you configure pipeline stages for these external systems, you define the credentials that the stage uses to connect to the system.">credential stores.</a></span></div>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To process change capture data from Microsoft SQL Server, on the
                        <span class="ph uicontrol">Change Data Capture</span> tab, optionally configure the
                    following properties to group rows by transaction:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__table_vnz_v1w_ht" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d278881e1529">Change Data Capture Property</th>

                                    <th class="entry" valign="top" width="70%" id="d278881e1532">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1529 ">Transaction ID Column Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1532 ">Transaction ID column name, typically __$start_lsn.
                                    </td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1529 ">Max Transaction Size (rows) <a class="xref" href="JDBCConsumer.html#concept_e1j_jwv_ht"><img class="image" id="task_ryz_tkr_bs__image_gsf_kdw_ht" src="../Graphics/icon_moreInfo.png" height="12" width="12" />
                                        </a></td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1532 ">Maximum number of rows to include in a batch.
                                            <p class="p">Overrides the <span class="ph">Data
                  Collector</span> maximum batch size. </p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When using JDBC versions older than 4.0, on the <span class="ph uicontrol">Legacy
                        Drivers</span> tab, optionally configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__d42825e3667" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d278881e1593">Legacy Driver Property</th>

                                    <th class="entry" valign="top" width="70%" id="d278881e1596">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1593 ">JDBC Class Driver Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1596 ">Class name for the JDBC driver. Required for JDBC
                                        versions older than version 4.0.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1593 ">Connection Health Test Query</td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1596 ">Optional query to test the health of a connection.
                                        Recommended only when the JDBC version is older than 4.0.
                                    </td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand" id="task_ryz_tkr_bs__JDBC-Advanced">
                <span class="ph cmd">On the <span class="keyword wintitle">Advanced</span> tab, optionally configure advanced
                    properties.</span>
                <div class="itemgroup info">The defaults for these properties should work in most cases:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__table_z1c_hjj_kw" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d278881e1649">Advanced Property</th>

                                    <th class="entry" valign="top" width="70%" id="d278881e1652">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Maximum Pool Size </td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">The maximum number of connections to create. <p class="p">Default is 1. The recommended value is
         1.</p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Minimum Idle Connections</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">The minimum number of connections to create and maintain. To define a fixed connection
        pool, set to the same value as Maximum Pool Size. <p class="p">Default is 1. </p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Connection Timeout</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Maximum time to wait for a connection. Use a time constant in an expression to define
        the time increment. <div class="p">Default is 30 seconds, defined as follows:
         <pre class="pre codeblock">${30 * SECONDS}</pre>
</div>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Idle Timeout</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Maximum time to allow a connection to idle. Use a time constant in an expression to
        define the time increment. <p class="p">Use 0 to avoid removing any idle connections.</p>
<div class="p">Default is
         30 minutes, defined as follows: <pre class="pre codeblock">${30 * MINUTES}</pre>
</div>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Max Connection Lifetime</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Maximum lifetime for a connection. Use a time constant in an expression to define the
        time increment. <p class="p">Use 0 to avoid removing any idle connections.</p>
<div class="p">Default is 30
         seconds, defined as follows: <pre class="pre codeblock">${30 * SECONDS}</pre>
</div>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Auto Commit</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Determines if auto-commit mode is enabled. In auto-commit mode, the database commits
        the data for each record. <p class="p">Default is disabled.</p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Enforce Read-only Connection</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Creates read-only connections to avoid any type of write. <p class="p">Default is enabled.
         Disabling this property is not recommended. </p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Transaction Isolation</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Transaction isolation level used to connect to the database. <p class="p">Default is the default
         transaction isolation level set for the database. You can override the database default by
         setting the level to any of the following:</p>
<ul class="ul" id="task_ryz_tkr_bs__d42622e2672">
         <li class="li">Read committed </li>

         <li class="li">Read uncommitted </li>

         <li class="li">Repeatable read</li>

         <li class="li">Serializable</li>

        </ul>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Init Query</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">SQL query to perform immediately after the stage connects to the database. Use to set
        up the database session as needed. <p class="p">For example, the following query sets the time zone
         for the session for a MySQL database: <samp class="ph codeph">SET time_zone =
        timezone;</samp></p>
</td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Create JDBC Header Attributes <a class="xref" href="JDBCConsumer.html#concept_egw_d4c_kw"><img class="image" id="task_ryz_tkr_bs__image_n2r_rjj_kw" src="../Graphics/icon_moreInfo.png" height="12" width="12" />
                                        </a></td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Adds JDBC header attributes to records. The origin
                                        creates JDBC header attributes by default. <div class="p">
                                            <div class="note note"><span class="notetitle">Note:</span> When using the origin with the Drift
                                                Synchronization Solution, make sure this property is
                                                selected.</div>

                                        </div>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1649 ">JDBC Header Prefix</td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Prefix for JDBC header attributes. </td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d278881e1649 ">Disable Query Validation</td>

                                    <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Disables the query validation that occurs by default. Use
                                        to avoid time consuming query validation situations, like
                                        when querying Hive, which requires using a MapReduce job to
                                        perform the validation. <div class="p">
                                            <div class="note warning"><span class="warningtitle">Warning:</span> Query validation prevents running a
                                                pipeline with invalid queries. Use this option with
                                                care. </div>

                                        </div>
</td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d278881e1649 ">On Unknown Type</td>

       <td class="entry" valign="top" width="70%" headers="d278881e1652 ">Action to take when the origin encounters a record with an unsupported data type:<ul class="ul" id="task_ryz_tkr_bs__d42622e2732">
         <li class="li">Stop Pipeline - Stops the pipeline after completing processing the previous
          records.</li>

         <li class="li">Convert to String - Converts the data to string and continues processing. </li>

        </ul>
</td>

      </tr>

                            </tbody>

                        </table>
</div>
</div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Origins/Origins_title.html" title="Origins"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Origins</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"><!--

    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

--><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>
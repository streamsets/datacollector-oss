
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="The Expression Evaluator performs calculations and writes the results to new or existing fields. You can also use the Expression Evaluator to add or modify record header attributes. To create an ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Expression Evaluator"></meta><meta name="abstract" content="The Expression Evaluator performs calculations and writes the results to new or existing fields. You can also use the Expression Evaluator to add or modify record header attributes."></meta><meta name="description" content="The Expression Evaluator performs calculations and writes the results to new or existing fields. You can also use the Expression Evaluator to add or modify record header attributes."></meta><meta name="DC.Relation" scheme="URI" content="../Processors/Processors_title.html"></meta><meta name="DC.Relation" scheme="URI" content="../Pipeline_Configuration/Expressions.html#concept_ofb_1cm_xq"></meta><meta name="DC.Relation" scheme="URI" content="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq"></meta><meta name="DC.Relation" scheme="URI" content="../Pipeline_Configuration/PipelineConstants.html#concept_rjh_ntz_qr"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_zm2_pp3_wq"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Expression Evaluator</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Processors/Processors_title.html" title="Processors">Processors</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Processors/Processors_title.html" title="Processors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Processors</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_zm2_pp3_wq">
 <h1 class="title topictitle1">Expression Evaluator</h1>

 
 <div class="body conbody"><p class="shortdesc">The Expression Evaluator performs calculations and writes the results to new or existing
        fields. You can also use the Expression Evaluator to add or modify record header attributes. </p>

  <p class="p">To create an expression, you
            define the name of the field or header attribute to receive the results of the
            expression. And then, use the expression language to define the expression to use.</p>

  <p class="p">You can use pipeline constants in expressions. Define a pipeline constant when you have a
            constant value that you use in more than one expression in the pipeline or that you want
            to change easily. </p>

        <p class="p">You can also use the time:now() function to include the <span class="ph">Data
                  Collector</span>
            server time in the record.</p>

 </div>

  <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br xmlns="http://www.w3.org/1999/xhtml" />
<div class="related_link"><a class="navheader_parent_path" href="../Pipeline_Configuration/Expressions.html#concept_ofb_1cm_xq" title="Precede all expressions with a dollar sign and enclose them with curly brackets, as follows: ${&lt;expression&gt;}.You can use quotation marks and the backslash character to handle special characters in field names. When a pipeline is valid for preview, you can generally select fields from a list. When a list is not available or when you are defining a new field name, you need to use the appropriate format for the field name. In some processors, you can use the asterisk wildcard (*) as indices in an array or key values in a map. Use a wildcard to help define the field paths for maps and arrays. Use the following information and tips when you invoke expression completion:When an expression requires, the expression language attempts implicit data type conversion - a.k.a. data type coercion. When coercion is not possible, Data Collector passes the error records to the stage for error handling.">Expression Configuration</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq" title="The following tables include some examples of how you might use expressions in the Data Collector.">Expression Language</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../Pipeline_Configuration/PipelineConstants.html#concept_rjh_ntz_qr" title="A pipeline constant is a constant that you define for the pipeline and that you can use in any stage in the pipeline. Define a pipeline constant when you have a constant that you want to update easily or to use more than once.">Pipeline Constants</a></div>
</div>
</div>
<div class="topic concept nested1" id="concept_pzk_fz4_yq">
 <h2 class="title topictitle2">Expression Output Fields</h2>

 
 <div class="body conbody"><p class="shortdesc">When you configure a field expression, the Expression Evaluator writes the results of
        the expression to a field. You can use an existing field or create a new field.</p>

  <p class="p">When you use an
            existing field, the Expression Evaluator replaces the incoming value with the new value.
            When you use a new field, the Expression Evaluator adds the new field to the record and
            passes the value of the expression.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_qf3_mfq_f5">
 <h2 class="title topictitle2">Record Header Attribute Expressions</h2>

 
 <div class="body conbody"><p class="shortdesc">You can use expressions to add or modify header attributes for a record. </p>

  <p class="p">For example, you
            could use the time:now() function to note the time when the <span class="ph">Data
                  Collector</span>
            processes the record. Or, you might use Expression Evaluator to set the
            SDC.MONGODB.OPERATION header to write to MongoDB.</p>

        <p class="p">Some destinations can use record header attributes to perform record-based writes. For
            more information, see <a class="xref" href="../Destinations/Destinations_overview.html#concept_lmn_gdc_1w">Record Header Attributes for Record-Based Writes</a>.</p>

        <div class="p">
            <div class="note note"><span class="notetitle">Note:</span> Avoid altering header attributes automatically generated by the <span class="ph">Data
                  Collector</span>. Altering <span class="ph">Data
                  Collector</span> attributes can cause unexpected results.</div>

        </div>

 </div>

</div>
<div class="topic task nested1" id="task_x2h_tv4_yq">
    <h2 class="title topictitle2">Configuring an Expression Evaluator</h2>

    <div class="body taskbody">
        <div class="section context">Configure an Expression
            Evaluator to perform calculations on a record-by-record basis.</div>

        <ol class="ol steps" id="task_x2h_tv4_yq__steps_wxb_ky4_yq"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_x2h_tv4_yq__d25031e3197" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="30%" id="d166408e191">General Property</th>

                                    <th class="entry" valign="top" width="70%" id="d166408e194">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d166408e191 ">Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d166408e194 ">Stage name.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d166408e191 ">Description</td>

                                    <td class="entry" valign="top" width="70%" headers="d166408e194 ">Optional description.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d166408e191 ">Required Fields <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_dnj_bkm_vq" title="A required field is a field that must exist in a record to allow it into the stage for processing. When a record does not include a required field, the record is diverted to the pipeline for error handling. You can define required fields for any processor and most destination stages.">
                                            <img class="image" id="task_x2h_tv4_yq__d25031e3243" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d166408e194 ">Fields that must include data to be passed into the
                                        stage. <div class="note tip"><span class="tiptitle">Tip:</span> You might include
                                            fields that the stage uses.</div>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d166408e191 ">Preconditions <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_msl_yd4_fs" title="Preconditions are conditions that a record must satisfy to enter the stage for processing. Like required fields, if a record does not meet a precondition, it is diverted to the pipeline for error handling. You can define preconditions for any processor and most destination stages.">
                                            <img class="image" id="task_x2h_tv4_yq__d25031e3257" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d166408e194 ">Conditions that must evaluate to TRUE to allow a record
                                        to enter the stage for processing. Click
                                            <span class="ph uicontrol">Add</span> to create additional
                                        preconditions. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d166408e191 ">On Record Error <a class="xref" href="../Pipeline_Design/ErrorHandling.html#concept_atr_j4y_5r" title="Most stages include error record handling options. When an error occurs when processing a record, Data Collector processes records based on the On Record Error property for the stage.">
                                            <img class="image" id="task_x2h_tv4_yq__d25031e3272" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d166408e194 ">Error record handling for the stage: <ul class="ul" id="task_x2h_tv4_yq__d25031e3276">
                                            <li class="li">Discard - Discards the record.</li>

                                            <li class="li">Send to Error - Sends the record to the pipeline for
                                                error handling.</li>

                                            <li class="li">Stop Pipeline - Stops the pipeline. Not valid for
                                                cluster pipelines.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To configure a field expression, click the <span class="keyword wintitle">Expressions</span> tab
                    and configure the following information:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_x2h_tv4_yq__table_zfp_zy4_yq" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="22.22222222222222%" id="d166408e313">Field Expression Property</th>

                                    <th class="entry" valign="top" width="77.77777777777779%" id="d166408e316">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d166408e313 ">Output Field</td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d166408e316 ">
                                        <p class="p">The field to pass the results of the expression to the
                                            next stage. Enter the name of a new or existing field as
                                            follows: /FieldName. </p>

                                        <p class="p">If you use an existing field, the Expression Evaluator
                                            replaces existing values.</p>

                                        <p class="p">You can use the asterisk wildcard to represent array indices and map
                  elements. <a class="xref" href="../Pipeline_Configuration/Expressions.html#concept_vqr_sqc_wr" title="In some processors, you can use the asterisk wildcard (*) as indices in an array or key values in a map. Use a wildcard to help define the field paths for maps and arrays."><img class="image" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12"></img>
                  </a>
            </p>

                                    </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d166408e313 ">Expression</td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d166408e316 ">Expression to evaluate. <p class="p">Optionally, click <span class="ph uicontrol">Ctrl + Space Bar</span> for help with
                  creating the expression. </p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To add additional field expressions, click the <span class="ph uicontrol">Add</span> icon.
                </span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To configure a header attribute expression, configure the following
                    information:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_x2h_tv4_yq__table_kcj_xhq_f5" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="22.22222222222222%" id="d166408e396">Header Attribute Expression Property</th>

                                    <th class="entry" valign="top" width="77.77777777777779%" id="d166408e399">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d166408e396 ">Header Attribute  <a class="xref" href="Expression.html#concept_qf3_mfq_f5" title="You can use expressions to add or modify header attributes for a record.">
                                            <img class="image" id="task_x2h_tv4_yq__image_off_qlq_f5" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d166408e399 ">
                                        <p class="p">The header attribute to pass the results of the
                                            expression to the next stage. Enter the name of a new or
                                            existing attribute as follows: &lt;attribute name&gt;. </p>

                                        <p class="p">When you use an existing attribute, the Expression
                                            Evaluator replaces existing values.</p>

                                        <div class="p">
                                            <div class="note note"><span class="notetitle">Note:</span> Avoid changing values for header attributes
                                                generated by the <span class="ph">Data
                  Collector</span>.</div>

                                        </div>

                                    </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="22.22222222222222%" headers="d166408e396 ">Expression</td>

                                    <td class="entry" valign="top" width="77.77777777777779%" headers="d166408e399 ">Expression to evaluate. <p class="p">Optionally, click <span class="ph uicontrol">Ctrl + Space Bar</span> for help with
                  creating the expression. </p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To add additional header attribute expressions, click the
                        <span class="ph uicontrol">Add</span> icon. </span>
            </li>
</ol>

    </div>

    <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br xmlns="http://www.w3.org/1999/xhtml" />
<div class="related_link"><a class="navheader_parent_path" href="../Pipeline_Configuration/Expressions.html#concept_tns_krz_sr" title="Use the following information and tips when you invoke expression completion:">Expression Completion in Properties</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../Pipeline_Configuration/Expressions.html#concept_ofb_1cm_xq" title="Precede all expressions with a dollar sign and enclose them with curly brackets, as follows: ${&lt;expression&gt;}.You can use quotation marks and the backslash character to handle special characters in field names. When a pipeline is valid for preview, you can generally select fields from a list. When a list is not available or when you are defining a new field name, you need to use the appropriate format for the field name. In some processors, you can use the asterisk wildcard (*) as indices in an array or key values in a map. Use a wildcard to help define the field paths for maps and arrays. Use the following information and tips when you invoke expression completion:When an expression requires, the expression language attempts implicit data type conversion - a.k.a. data type coercion. When coercion is not possible, Data Collector passes the error records to the stage for error handling.">Expression Configuration</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq" title="The following tables include some examples of how you might use expressions in the Data Collector.">Expression Language</a></div>
</div>
</div>
</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Processors/Processors_title.html" title="Processors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Processors</span></a></span>  </div><div class="footer"><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="The JDBC Query executor connects through JDBC to a database and performs a user-defined SQL query each time it receives an event record. Use the JDBC Query executor as part of an event stream in the ..." /><meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="JDBC Query Executor" /><meta name="DC.Relation" scheme="URI" content="../Executors/Executors-title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_j3r_gcv_sx" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>JDBC Query Executor</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Executors/Executors-title.html" title="Executors">Executors</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Executors/Executors-title.html" title="Executors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Executors</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_j3r_gcv_sx">
 <h1 class="title topictitle1">JDBC Query Executor</h1>

 <div class="body conbody">
  <p class="p">The JDBC Query executor connects through JDBC to a
            database and performs a user-defined SQL query each time it receives an event record.
            Use the JDBC Query executor as part of an event stream in the pipeline. </p>

        <p class="p">The JDBC Query executor can commit to the database after each batch or set auto-commit
            mode. In auto-commit mode, the database commits the data for each record. By default,
            the executor commits after each batch.</p>

        <p class="p">When you configure the JDBC Query executor, you specify JDBC connection properties and
            the query you want to use. You can configure custom properties that your driver
            requires, advanced connection properties, and the commit type to use.</p>

        <p class="p">To use a JDBC version older than 4.0, you can specify the driver class name and define a
            health check query.</p>

        <p class="p"><span class="ph">For more information about dataflow
                        triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>.</span></p>

       
 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_y32_vt4_tx">
 <h2 class="title topictitle2">Installing the JDBC Driver</h2>

 <div class="body conbody">
  <p class="p">Before you
            use the JDBC Query executor, <span class="ph">install the JDBC driver for the database. You cannot access
                        the database until you install the required driver. </span></p>

        <p class="p">For more information about installing drivers, see <a class="xref" href="../Configuration/ExternalLibs.html#concept_pdv_qlw_ft" title="After you've set up the external directory, use the Package Manager within Data Collector to install external libraries.">Install External Libraries</a>.</p>

 </div>

</div>
<div class="topic task nested1" id="task_ym2_3cv_sx">
    <h2 class="title topictitle2">Configuring a JDBC Query Executor</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Configure
                a JDBC Query executor as part of an event stream to execute a database query each
                time it receives an event record. </p>

        </div>

        <ol class="ol steps" id="task_ym2_3cv_sx__steps_y1j_mz4_tx"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ym2_3cv_sx__d29496e5062" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d170161e130">General Property</th>

                                    <th class="entry" valign="top" width="70%" id="d170161e133">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e130 ">Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e133 ">Stage name.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e130 ">Description</td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e133 ">Optional description.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e130 ">Required Fields <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_dnj_bkm_vq">
                                            <img class="image" id="task_ym2_3cv_sx__d29496e5108" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e133 ">Fields that must include data for the record to be passed
                                        into the stage. <div class="note tip"><span class="tiptitle">Tip:</span> You might
                                            include fields that the stage uses.</div>
<p class="p">Records
                                            that do not include all required fields are processed
                                            based on the error handling configured for the
                                            pipeline.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e130 ">Preconditions <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_msl_yd4_fs">
                                            <img class="image" id="task_ym2_3cv_sx__d29496e5124" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e133 ">Conditions that must evaluate to TRUE to allow a record
                                        to enter the stage for processing. Click
                                            <span class="ph uicontrol">Add</span> to create additional
                                        preconditions. <p class="p">Records that do not meet all preconditions
                                            are processed based on the error handling configured for
                                            the stage.</p>
</td>

                                       
                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e130 ">On Record Error <a class="xref" href="../Pipeline_Design/ErrorHandling.html#concept_atr_j4y_5r">
                                            <img class="image" id="task_ym2_3cv_sx__d29496e5141" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e133 ">Error record handling for the stage: <ul class="ul" id="task_ym2_3cv_sx__d29496e5145">
                                            <li class="li">Discard - Discards the record.</li>

                                            <li class="li">Send to Error - Sends the record to the pipeline for
                                                error handling.</li>

                                            <li class="li">Stop Pipeline - Stops the pipeline.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand" id="task_ym2_3cv_sx__step-JDBCQuerytab">
                <span class="ph cmd">On the <span class="keyword wintitle">JDBC</span> tab, configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ym2_3cv_sx__table_vd3_f1p_tx" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d170161e244">JDBC Property</th>

                                    <th class="entry" valign="top" width="70%" id="d170161e247">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e244 ">JDBC Connection String</td>

       <td class="entry" valign="top" width="70%" headers="d170161e247 ">Connection string to use to connect to the database.<p class="p">Some databases, such as
         Postgres, require the schema in the connection string. Use the connection string format
         required by the database.</p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e244 ">Use Credentials</td>

       <td class="entry" valign="top" width="70%" headers="d170161e247 ">Enables entering credentials on the Credentials tab. Use when you do not include
        credentials in the JDBC connection string.</td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e244 ">SQL Query</td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e247 ">Query to perform each time the executor receives an event
                                        record. </td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e244 ">Additional JDBC Configuration Properties</td>

       <td class="entry" valign="top" width="70%" headers="d170161e247 ">Additional JDBC configuration properties to use. To add properties, click
         <span class="ph uicontrol">Add</span> and define the JDBC property name and value. <p class="p">Use the property
         names and values as expected by JDBC. </p>
</td>

      </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To enter JDBC credentials separately from the JDBC connection string, on the
                        <span class="ph uicontrol">Credentials</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ym2_3cv_sx__d29496e3296" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d170161e324">Credentials Property</th>

                                    <th class="entry" valign="top" width="70%" id="d170161e327">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e324 ">Username</td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e327 ">User name for the JDBC connection.</td>

                                </tr>

                                <tr id="task_ym2_3cv_sx__d29496e3327">
                                    <td class="entry" valign="top" width="30%" headers="d170161e324 ">Password</td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e327 ">Password for the JDBC account.<div class="note tip"><span class="tiptitle">Tip:</span> To secure sensitive information such as usernames and passwords, you
                  can use <a class="xref" href="../Configuration/CredentialStores.html#concept_bt1_bpj_r1b" title="Data Collector pipeline stages communicate with external systems to read and write data. Many of these external systems require credentials - user names or passwords - to access the data. When you configure pipeline stages for these external systems, you define the credentials that the stage uses to connect to the system.">credential stores</a> or <a class="xref" href="../Pipeline_Configuration/PipelineConfiguration_title.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure sensitive information. Use runtime resources to load sensitive information from files at runtime.">runtime resources</a>. </div>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When using JDBC versions older than 4.0, on the <span class="ph uicontrol">Legacy
                        Drivers</span> tab, optionally configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ym2_3cv_sx__d29496e3353" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d170161e400">Legacy Driver Property</th>

                                    <th class="entry" valign="top" width="70%" id="d170161e403">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e400 ">JDBC Class Driver Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e403 ">Class name for the JDBC driver. Required for JDBC
                                        versions older than version 4.0.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e400 ">Connection Health Test Query</td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e403 ">Optional query to test the health of a connection.
                                        Recommended only when the JDBC version is older than 4.0.
                                    </td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand" id="task_ym2_3cv_sx__JDBC-Advanced">
                <span class="ph cmd">On the <span class="keyword wintitle">Advanced</span> tab, optionally configure advanced
                    properties.</span>
                <div class="itemgroup info">The defaults for these properties should work in most cases:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ym2_3cv_sx__table_wnj_hf3_p5" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d170161e455">Advanced Property</th>

                                    <th class="entry" valign="top" width="70%" id="d170161e458">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e455 ">Maximum Pool Size </td>

       <td class="entry" valign="top" width="70%" headers="d170161e458 ">The maximum number of connections to create. <p class="p">Default is 1. The recommended value is
         1.</p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e455 ">Minimum Idle Connections</td>

       <td class="entry" valign="top" width="70%" headers="d170161e458 ">The minimum number of connections to create and maintain. To define a fixed connection
        pool, set to the same value as Maximum Pool Size. <p class="p">Default is 1. </p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e455 ">Connection Timeout</td>

       <td class="entry" valign="top" width="70%" headers="d170161e458 ">Maximum time to wait for a connection. Use a time constant in an expression to define
        the time increment. <div class="p">Default is 30 seconds, defined as follows:
         <pre class="pre codeblock">${30 * SECONDS}</pre>
</div>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e455 ">Idle Timeout</td>

       <td class="entry" valign="top" width="70%" headers="d170161e458 ">Maximum time to allow a connection to idle. Use a time constant in an expression to
        define the time increment. <p class="p">Use 0 to avoid removing any idle connections.</p>
<div class="p">Default is
         30 minutes, defined as follows: <pre class="pre codeblock">${30 * MINUTES}</pre>
</div>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e455 ">Max Connection Lifetime</td>

       <td class="entry" valign="top" width="70%" headers="d170161e458 ">Maximum lifetime for a connection. Use a time constant in an expression to define the
        time increment. <p class="p">Use 0 to avoid removing any idle connections.</p>
<div class="p">Default is 30
         seconds, defined as follows: <pre class="pre codeblock">${30 * SECONDS}</pre>
</div>
</td>

      </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d170161e455 ">Batch Commit</td>

                                    <td class="entry" valign="top" width="70%" headers="d170161e458 ">Determines if the executor commits to the database after
                                        each batch. <p class="p">Default is enabled. </p>
</td>

                                </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e455 ">Auto Commit</td>

       <td class="entry" valign="top" width="70%" headers="d170161e458 ">Determines if auto-commit mode is enabled. In auto-commit mode, the database commits
        the data for each record. <p class="p">Default is disabled.</p>
</td>

      </tr>

                                <tr>
       <td class="entry" valign="top" width="30%" headers="d170161e455 ">Transaction Isolation</td>

       <td class="entry" valign="top" width="70%" headers="d170161e458 ">Transaction isolation level used to connect to the database. <p class="p">Default is the default
         transaction isolation level set for the database. You can override the database default by
         setting the level to any of the following:</p>
<ul class="ul" id="task_ym2_3cv_sx__d29514e2669">
         <li class="li">Read committed </li>

         <li class="li">Read uncommitted </li>

         <li class="li">Repeatable read</li>

         <li class="li">Serializable</li>

        </ul>
</td>

      </tr>

                            </tbody>

                        </table>
</div>
</div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Executors/Executors-title.html" title="Executors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Executors</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"><!--

    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

--><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>
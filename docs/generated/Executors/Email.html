
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="The Email executor sends the configured email to the specified recipients upon receiving an event. You can also configure the executor to send an email based on a condition, such as the arrival of a ..." /><meta name="copyright" content="(C) Copyright 2005" /><meta name="DC.rights.owner" content="(C) Copyright 2005" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Email Executor" /><meta name="DC.Relation" scheme="URI" content="../Executors/Executors-title.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="concept_sjs_sfp_qz" /><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Email Executor</title><!--  Generated with Oxygen version 18.1, build number 2016112217.  --><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css" /><link rel="stylesheet" type="text/css" href="../skin.css" /><script type="text/javascript"><!--
            
            var prefix = "../index.html";
            
            --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script>
<!--
    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
</head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td style="width:75%;"><span class="topic_breadcrumb_links"><span class="topic_breadcrumb_link"><a class="navheader_parent_path" href="../Executors/Executors-title.html" title="Executors">Executors</a></span></span></td><td><span id="topic_navigation_links" class="navheader">
<span class="navparent"><a class="link" href="../Executors/Executors-title.html" title="Executors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Executors</span></a></span>  </span></td></tr></tbody></table>
<div class="nested0" id="concept_sjs_sfp_qz">
    <h1 class="title topictitle1">Email Executor</h1>

    <div class="body conbody">
        <p class="p">The Email executor sends the
            configured email to the specified recipients upon receiving an event. You can also
            configure the executor to send an email based on a condition, such as the arrival of a
            specific type of event. </p>

        <p class="p">You can configure the Email executor to send multiple emails, each with its own
            condition, set of recipients, and email message. You can use expressions in all email
            fields. </p>

        <p class="p">Before you use an Email executor in a pipeline, you must enable <span class="ph">Data
                  Collector</span> to
            send email. For more information about configuring <span class="ph">Data
                  Collector</span>
            and other ways to configure notification, see <a class="xref" href="../Configuration/DCConfig.html#concept_it1_wwg_xz">Sending Email</a>. </p>

        <p class="p">For a case study about using the Email executor, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_t2t_lp5_xz">Case Study: Sending Email</a>. <span class="ph">For more information about dataflow
                        triggers and the event framework, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_cph_5h4_lx">Dataflow Triggers Overview</a>.</span></p>

    </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_vvm_ymm_wz">
 <h2 class="title topictitle2">Prerequisite</h2>

 <div class="body conbody">
        <p class="p">Before you run a
            pipeline that includes the Email executor, define the email alert properties in the <span class="ph">Data
                  Collector</span>
            configuration file, $SDC_CONF/sdc.properties. </p>

        <p class="p">For more information about enabling <span class="ph">Data
                  Collector</span> to
            send email and different ways it can send email, see <a class="xref" href="../Configuration/DCConfig.html#concept_it1_wwg_xz">Sending Email</a>.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_v4p_hh5_xz">
 <h2 class="title topictitle2">Conditions</h2>

 <div class="body conbody">
        <p class="p">You can configure the Email executor to send an
            email based on a condition, such as the type of event to trigger the email. If you omit
            a condition, the Email executor sends the email each time it receives an event.</p>

        <div class="p">For example, say you have a pipeline that uses a JDBC Query Consumer origin. The origin
            generates several types of events: one for query success, one for query failure, and one
            for the processing of all available data. To have the Email executor send a email only
            when a query fails, you use the event type in the email condition, as
            follows:<pre class="pre codeblock">${record:eventType() == 'jdbc-query-failure'} </pre>
</div>

        <p class="p">The event type is stored in the record header attribute of every event record. The
            expression language provides the <samp class="ph codeph">record:eventType()</samp> function to return
            the event type for event records.</p>

        <p class="p">To determine the event type to use on the right side of the condition, review the <a class="xref" href="../Origins/JDBCConsumer.html#concept_rzl_s1t_kz">"Event Record"
                documentation for the stage</a>. In this case, jdbc-query-failure is the event
            type for JDBC Query Consumer query failure events.</p>

        <div class="p">
            <div class="note tip"><span class="tiptitle">Tip:</span> By using conditions, you can route multiple event streams to the same
                Email executor and configure all event-driven email notification in the executor.
                For an example, see <a class="xref" href="../Event_Handling/EventFramework-Title.html#concept_t2t_lp5_xz">Case Study: Sending Email</a>.</div>

        </div>

 </div>

</div>
<div class="topic concept nested1" id="concept_tgb_vbm_wz">
    <h2 class="title topictitle2">Using Expressions</h2>

    <div class="body conbody">
        <p class="p">You can use
            expressions in any email property in the Email executor. For example, you can base the
            condition on information in the event record, and include information about the pipeline
            in the email message. </p>

        <div class="p">You can use any functions that work for your use case, but here are some suggestions:<dl class="dl">
                
                    <dt class="dt dlterm">pipeline functions</dt>

                    <dd class="dd">
                        <p class="p">You can use the pipeline functions to provide pipeline information such
                            as the pipeline name and ID. </p>

                        <div class="p">For example, you can use <samp class="ph codeph">pipeline:title()</samp> and
                                <samp class="ph codeph">pipeline:id()</samp> in the email message to indicate the
                            pipeline that generated the event and email. You might use the following
                            message when the email is configured to send after the Pipeline Finisher
                            stops the
                            pipeline:<pre class="pre codeblock">Heads up! ${pipeline:title()}, ${pipeline:id()}, has successfully completed.</pre>
</div>

                    </dd>

                
                
                    <dt class="dt dlterm">record functions</dt>

                    <dd class="dd">You can use record functions to provide information from the event record.
                        For example, you should use <samp class="ph codeph">record:eventType()</samp> in the
                        condition if the pipeline routes multiple types of events to the Email
                        executor and you want to send the email only upon receiving a particular
                        event type. If you use the executor with the JDBC Query Consumer, you can
                        use the following condition to send the email when a query successfully
                            completes:<pre class="pre codeblock">${record:eventType() == 'jdbc-query-success'}</pre>
<div class="p">You
                            might also use the <samp class="ph codeph">record:eventCreation()</samp> function to
                            include the time that the event occurred in the message. The creation
                            time is returned in epoch time, so to create a readable timestamp, you
                            can use the following
                            expression:<pre class="pre codeblock">${time:millisecondsToDateTime(record:eventCreation() * 1000)}</pre>
</div>
<p class="p">And
                            of course, you can use the <samp class="ph codeph">record:value</samp> function to
                            include information from the event record, such as the query that
                            successfully completed.</p>
</dd>

                
                
                    <dt class="dt dlterm">file functions</dt>

                    <dd class="dd">You can use file functions to provide information about a closed or written
                        file. </dd>

                    <dd class="dd">For example, you might use the <samp class="ph codeph">file:fileName</samp> function to
                        extract the name of a closed file from the filepath field of a Hadoop FS
                        file-closure event as
                        follows:<pre class="pre codeblock">${file:fileName(record:value('/filepath'))}</pre>
</dd>

                
            </dl>
</div>

    </div>

</div>
<div class="topic task nested1" id="task_pyx_tfp_qz">
    <h2 class="title topictitle2">Configuring an Email Executor</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Configure an
                Email executor to send email upon receiving events.</p>

        </div>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_pyx_tfp_qz__d29496e4569" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d164163e279">General Property</th>

                                    <th class="entry" valign="top" width="70%" id="d164163e282">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e279 ">Name</td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e282 ">Stage name.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e279 ">Description</td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e282 ">Optional description.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e279 ">Required Fields <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_dnj_bkm_vq">
                                            <img class="image" id="task_pyx_tfp_qz__d29496e4615" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e282 ">Fields that must include data for the record to be passed
                                        into the stage. <div class="note tip"><span class="tiptitle">Tip:</span> You might
                                            include fields that the stage uses.</div>
<p class="p">Records
                                            that do not include all required fields are processed
                                            based on the error handling configured for the
                                            pipeline.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e279 ">Preconditions <a class="xref" href="../Pipeline_Design/DroppingUnwantedRecords.html#concept_msl_yd4_fs">
                                            <img class="image" id="task_pyx_tfp_qz__d29496e4631" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e282 ">Conditions that must evaluate to TRUE to allow a record
                                        to enter the stage for processing. Click
                                            <span class="ph uicontrol">Add</span> to create additional
                                        preconditions. <p class="p">Records that do not meet all preconditions
                                            are processed based on the error handling configured for
                                            the stage.</p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e279 ">On Record Error <a class="xref" href="../Pipeline_Design/ErrorHandling.html#concept_atr_j4y_5r">
                                            <img class="image" id="task_pyx_tfp_qz__d29496e4648" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e282 ">Error record handling for the stage: <ul class="ul" id="task_pyx_tfp_qz__d29496e4652">
                                            <li class="li">Discard - Discards the record.</li>

                                            <li class="li">Send to Error - Sends the record to the pipeline for
                                                error handling.</li>

                                            <li class="li">Stop Pipeline - Stops the pipeline. Not valid for
                                                cluster pipelines.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand" id="task_pyx_tfp_qz__step-Emailtab">
                <span class="ph cmd">On the <span class="keyword wintitle">Email</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_pyx_tfp_qz__table_iks_gzb_yz" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr>
                                    <th class="entry" valign="top" width="30%" id="d164163e393">Email Configuration Property</th>

                                    <th class="entry" valign="top" width="70%" id="d164163e396">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e393 ">Condition <a class="xref" href="Email.html#concept_v4p_hh5_xz">
                                            <img class="image" id="task_pyx_tfp_qz__image_w55_4yn_lw" src="../Graphics/icon_moreInfo.png" height="12" width="12" /></a></td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e396 ">Optional condition for when to send the email. Use a
                                        condition that evaluates to true or false. When the
                                        condition evaluates to true, the executor sends the
                                        configured email. <p class="p">When not used, the executor sends an
                                            email each time it receives an event. </p>
</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e393 ">Email IDs</td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e396 ">Email addresses to use. Click the
                                            <span class="ph uicontrol">Add</span> icon to add additional
                                        recipients.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e393 ">Email Subject</td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e396 ">The information to display in the subject field of the
                                        email.</td>

                                </tr>

                                <tr>
                                    <td class="entry" valign="top" width="30%" headers="d164163e393 ">Email Body</td>

                                    <td class="entry" valign="top" width="70%" headers="d164163e396 ">The information to display in the body of the
                                        email.</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                    <div class="note note"><span class="notetitle">Note:</span> You can use expressions in all email configuration properties. For more
                        information, see <a class="xref" href="Email.html#concept_tgb_vbm_wz">Using Expressions</a>.</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Using <a class="xref" href="../Pipeline_Configuration/PipelineConfiguration_title.html#concept_alb_b3y_cbb">simple or bulk edit mode</a>, click the <span class="ph uicontrol">Add</span> icon
                    to configure an additional email.</span>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Executors/Executors-title.html" title="Executors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Executors</span></a></span>  </div><div class="footer" id="webhelp_copyright_information"><!--

    Copyright 2017 StreamSets Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

--><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>
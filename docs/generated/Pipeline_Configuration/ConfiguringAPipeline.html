
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Configure a pipeline to define the stream of data. After you configure the pipeline, you can start the pipeline. A pipeline can include the following components: A single origin stage Multiple ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="task"></meta><meta name="DC.Title" content="Configuring a Pipeline"></meta><meta name="abstract" content="Configure a pipeline to define the stream of data. After you configure the pipeline, you can start the pipeline."></meta><meta name="description" content="Configure a pipeline to define the stream of data. After you configure the pipeline, you can start the pipeline."></meta><meta name="DC.Relation" scheme="URI" content="../Pipeline_Configuration/PipelineConfiguration_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="task_xlv_jdw_kq"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Configuring a Pipeline</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="task_xlv_jdw_kq">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration">Pipeline Configuration</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Pipeline Configuration</span></a></span>  </div></td></tr></tbody></table>

    <h1 class="title topictitle1">Configuring a Pipeline</h1>

    
    <div class="body taskbody"><p class="shortdesc">Configure a pipeline to define the stream of data. After you configure the pipeline,
        you can start the pipeline. </p>

        <div class="section context">
            <div class="p">A pipeline can
                include the following components:<ul class="ul" id="task_xlv_jdw_kq__ul_eyy_b2w_kq">
                    <li class="li">A single origin stage</li>

                    <li class="li">Multiple processor stages</li>

                    <li class="li">Multiple destination stages</li>

                </ul>
</div>

        </div>

        <ol class="ol steps" id="task_xlv_jdw_kq__steps_tsx_d2w_kq"><li class="li step stepexpand">
                <span class="ph cmd">If this is the first pipeline for the <span class="ph">Data
                  Collector</span>, click <span class="ph uicontrol">Create Pipeline</span>. </span>
                <div class="itemgroup info">If you have created other pipelines, if necessary, use the <span class="ph uicontrol">Toggle
                        Library</span> icon to display the Library, and click the
                        <span class="ph uicontrol">Create New Pipeline</span> icon.</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">In the <span class="keyword wintitle">New Pipeline</span> window, enter a pipeline name and
                    optional description, and click <span class="ph uicontrol">Save</span>.</span>
                <div class="itemgroup stepresult">The pipeline canvas displays the new name. The Properties panel displays
                    the pipeline properties. </div>
            </li>
<li class="li step stepexpand" id="task_xlv_jdw_kq__pipeProperties">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    <table cellpadding="4" cellspacing="0" summary="" id="task_xlv_jdw_kq__simpletable_m1s_q1m_sq" border="1" class="simpletable"><tr class="sthead">
                            <th valign="bottom" align="left" id="d24699e88" class="stentry" width="23.980815347721823%">Pipeline Property</th>

                            <th valign="bottom" align="left" id="d24699e91" class="stentry" width="76.01918465227817%">Description</th>

                        </tr>
<tr class="strow">
                            <td valign="top" headers="d24699e88" class="stentry">Description</td>

                            <td valign="top" headers="d24699e91" class="stentry">Optional description of the pipeline.</td>

                        </tr>
<tr class="strow">
                            <td valign="top" headers="d24699e88" class="stentry">Execution Mode <a class="xref" href="../Advanced_PipelineConfig/ExecutionMode.html#concept_hmh_kfn_1s"><img class="image" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                            <td valign="top" headers="d24699e91" class="stentry">Execution mode of the pipeline:<ul class="ul" id="task_xlv_jdw_kq__ul_bn5_jsz_zr">
                                    <li class="li">Standalone - You plan to run the pipeline with a <span class="ph">Data
                  Collector</span> instance in standalone mode.</li>

                                    <li class="li">Cluster - You plan to run the pipeline with a <span class="ph">Data
                  Collector</span> in cluster mode. </li>

                                </ul>
</td>

                        </tr>
<tr class="strow">
                            <td valign="top" headers="d24699e88" class="stentry">Delivery Guarantee <a class="xref" href="DeliveryGuarantee.html#concept_ffz_hhw_kq" title="When you configure a pipeline, you define how you want data to be treated: Do you want to prevent the loss of data, or do you want to prevent the duplication of data?">
                                    <img class="image" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                            <td valign="top" headers="d24699e91" class="stentry">Determines how the <span class="ph">Data
                  Collector</span> handles data after an unexpected event causes the pipeline to
                                stop running:<ul class="ul" id="task_xlv_jdw_kq__ul_b4v_51m_sq">
                                    <li class="li">At Least Once - Ensures all data is processed and written to
                                        the destination. Might result in duplicate rows.</li>

                                    <li class="li">At Most Once - Ensures that data is not reprocessed to
                                        prevent writing duplicate data to the destination. Might
                                        result in missing rows.</li>

                                </ul>
<p class="p">Default is <span class="ph uicontrol">At least
                                once</span>.</p>
</td>

                        </tr>
<tr class="strow">
                            <td valign="top" headers="d24699e88" class="stentry">Memory Limit <a class="xref" href="PipelineMemory.html#concept_twq_nhx_rr" title="The Data Collector uses memory when it runs a pipeline. To avoid causing out-of-memory errors on the host machine, you can configure the maximum amount of memory that can be used for the pipeline."><img class="image" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                            <td valign="top" headers="d24699e91" class="stentry">Maximum amount of memory for the pipeline to use. <p class="p">Best
                                    practice is to use up to 65% of the Java heap size defined for
                                    the <span class="ph">Data
                  Collector</span>. </p>
</td>

                        </tr>
<tr class="strow">
                            <td valign="top" headers="d24699e88" class="stentry">Memory Exceeded</td>

                            <td valign="top" headers="d24699e91" class="stentry">Action to take when the pipeline memory reaches the memory
                                    limit:<ul class="ul" id="task_xlv_jdw_kq__ul_vsf_3k4_1s">
                                    <li class="li">Log - Logs a message in the pipeline history.</li>

                                    <li class="li">Log and Alert - Logs a message and triggers an alert that
                                        displays in monitor mode and sends an alert email to any
                                        provided email addresses.</li>

                                </ul>
<ul class="ul" id="task_xlv_jdw_kq__ul_mtf_3k4_1s">
                                    <li class="li">Log, Alert and Stop Pipeline - Logs a message, triggers an
                                        alert that displays in monitor mode and sends an alert email
                                        to any provided email addresses. Stops the pipeline.</li>

                                </ul>
</td>

                        </tr>
</table>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click the <span class="keyword wintitle">Error Records</span> tab and configure the following
                    error handling option:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_xlv_jdw_kq__table_ghf_x22_br" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="25.97402597402597%" id="d24699e236">Error Records Property</th>

                                    <th class="entry" valign="top" width="74.02597402597402%" id="d24699e239">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="25.97402597402597%" headers="d24699e236 ">Error Record Handling <a class="xref" href="ErrorHandling.html#concept_pm4_txm_vq" title="You can configure error record handling at a stage level and at a pipeline level.">
                                            <img class="image" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                    <td class="entry" valign="top" width="74.02597402597402%" headers="d24699e239 ">Determines how to handle records that cannot be processed
                                        as expected. Use one of the following options:<ul class="ul" id="task_xlv_jdw_kq__ul_ayr_y22_br">
                                            <li class="li">Discard - Discards error records.</li>

                                            <li class="li">Write to File - Writes error records to a file in
                                                the specified directory</li>

                                            <li class="li">Write to Kafka - Writes error records to the
                                                specified Kafka cluster.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When writing error records to file, click the <span class="keyword wintitle">Error Records - Write
                        to File</span> tab and configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_xlv_jdw_kq__table_gy3_1y4_1r" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="24.096385542168672%" id="d24699e300">Write to File Property</th>

                                    <th class="entry" valign="top" width="75.90361445783131%" id="d24699e303">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="24.096385542168672%" headers="d24699e300 ">Directory</td>

                                    <td class="entry" valign="top" width="75.90361445783131%" headers="d24699e303 ">Local directory for error record files. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="24.096385542168672%" headers="d24699e300 ">File Wait Time (secs)</td>

                                    <td class="entry" valign="top" width="75.90361445783131%" headers="d24699e303 ">Number of seconds the <span class="ph">Data
                  Collector</span> waits for error records. After that time, it creates a
                                        new error record file. <p class="p">You can enter a number of seconds
                                            or use the default expression to enter the time in
                                            minutes. </p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="24.096385542168672%" headers="d24699e300 ">Max File Size (MB)</td>

                                    <td class="entry" valign="top" width="75.90361445783131%" headers="d24699e303 ">Maximum size for error files. Exceeding this size creates
                                        a new error file. <p class="p">Use 0 to write to avoid using this
                                            property.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When writing error records to Kafka, click the <span class="keyword wintitle">Error Records - Write
                        to Kafka</span> tab and configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_xlv_jdw_kq__table_asn_5l4_1s" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr class="row">
                                        <th class="entry" valign="top" width="23.980815347721823%" id="d24699e372">Kafka Properties</th>

                                        <th class="entry" valign="top" width="76.01918465227818%" id="d24699e375">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Broker URI</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">A comma-separated list of URIs for Kafka brokers that
                                            write to the topic. Use the following format:
                                                <samp class="ph codeph">&lt;host&gt;:&lt;port&gt;</samp>.<p class="p">To ensure a
                                                connection, enter a comma-separated list of
                                                additional broker URI.</p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Runtime Topic Resolution <a class="xref" href="../Destinations/KProducer.html#concept_ok1_cwr_xr" title="Kafka Producer can write a record to the topic based on an expression. When Kafka Producer evaluates a record, it calculates the expression based on record values and writes the record to the resulting topic."><img class="image" id="task_xlv_jdw_kq__d2557e1006" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Evaluates an expression at runtime to determine the
                                            topic to use for each record.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Topic Expression</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Expression used to determine where each record is
                                            written. Use an expression that evaluates to a topic
                                            name. </td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Topic White List</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">List of valid topic names to write to. Use to avoid
                                            writing to invalid topics. Records that resolve to
                                            invalid topic names are passed the stage for error
                                            handling. <p class="p">Use an asterisk (*) to allow writing to any
                                                topic name. By default, all topic names are
                                                valid.</p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Topic</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Kafka topic to use. <p class="p">Not available when using
                                                runtime topic resolution.</p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Partition Strategy </td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Strategy to use to write to partitions:<ul class="ul" id="task_xlv_jdw_kq__d2557e1051">
                                                <li class="li">Round Robin - Takes turns writing to different
                                                  partitions.</li>

                                                <li class="li">Random - Writes to partitions randomly.</li>

                                                <li class="li">Expression - Uses an expression to write data to
                                                  different partitions. </li>

                                            </ul>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Expression <a class="xref" href="../Destinations/KProducer.html#concept_qpm_xp4_4r" title="The partition strategy determines how to write data to Kafka partitions. You can use a partition strategy to balance the work load or to write data semantically.">
                                                <img class="image" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Expression to use to using the Expression partition
                                            strategy. <p class="p">Define the expression to evaluate to the
                                                partition where you want each record written.
                                                Partitions are numbered 0 - n.</p>
<p class="p">Optionally, click <span class="ph uicontrol">Ctrl + Spacebar</span> for help with
                  creating the expression. </p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Data Format</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Data format for output messages:<ul class="ul" id="task_xlv_jdw_kq__d2557e1086">
                                                <li class="li">Text</li>

                                                <li class="li">JSON</li>

                                                <li class="li">Delimited</li>

                                                <li class="li">SDC Record <a class="xref" href="PipelineDesign.html#concept_qkk_mwk_br" title="SDC Record is a proprietary data format that the Data Collector can use to read and write data. The Data Collector also uses SDC Record to generate error records.">
                                                  <img class="image" id="task_xlv_jdw_kq__d2557e1101" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="12" width="12"></img></a></li>

                                            </ul>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Messages Charset</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Character encoding to use when writing data. <p class="p">Not
                                                used for the SDC Record data format.</p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">One Message per Batch</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Generates a single message for all records in the
                                            batch.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="23.980815347721823%" headers="d24699e372 ">Kafka Configuration</td>

                                        <td class="entry" valign="top" width="76.01918465227818%" headers="d24699e375 ">Additional Kafka properties to use. Click the
                                                <span class="ph uicontrol">Add</span> icon and define the Kafka
                                            property name and value. <p class="p">Use the property names and
                                                values as expected by Kafka. Do not use the
                                                broker.list property.</p>
<p class="p">Several properties are
                                                defined by default. You can edit or delete the
                                                properties. </p>
</td>

                                    </tr>

                                </tbody>

                            </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When using the cluster execution mode, click the <span class="ph uicontrol">Cluster</span>
                    tab and configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_xlv_jdw_kq__table_mkj_kdr_wr" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="28.011204481792717%" id="d24699e585">Cluster Property</th>

                                    <th class="entry" valign="top" width="71.98879551820728%" id="d24699e588">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="28.011204481792717%" headers="d24699e585 ">Worker Memory (MB)</td>

                                    <td class="entry" valign="top" width="71.98879551820728%" headers="d24699e588 ">Maximum amount of memory allocated to each <span class="ph">Data
                  Collector</span> worker in the cluster.<p class="p">Default is 1024 MB.</p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="28.011204481792717%" headers="d24699e585 ">Launcher Env</td>

                                    <td class="entry" valign="top" width="71.98879551820728%" headers="d24699e588 ">
                                        <p class="p">Additional &lt;&lt;?&gt;&gt;  properties to use. Click the
                                                <span class="ph uicontrol">Add</span> icon and define the
                                            property name and value. </p>

                                        <p class="p">Use the property names and values as expected by
                                            &lt;&lt;?&gt;&gt;. </p>

                                    </td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Use the <span class="ph uicontrol">Stage Library</span> to add an origin stage. In the
                    Properties panel, configure the stage properties.</span>
                <div class="itemgroup info">For configuration details about origin stages, see <a class="xref" href="../Origins/Origins_overview.html#concept_hpr_twm_jq" title="An origin stage represents the source data for the pipeline. You can use a single origin stage in a pipeline.">Origins</a>.</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Use the <span class="ph uicontrol">Stage Library</span> to add the next stage that you
                    want to use, connect the origin to the new stage, and configure the new
                    stage.</span>
                <div class="itemgroup info">For configuration details about processors, see <a class="xref" href="../Processors/Processors_overview.html#concept_hpr_twm_jq" title="A processor stage represents a type of data processing that you want to perform. You can use as many processors in a pipeline as you need.">Processors</a>.<p class="p">For
                        configuration details about destinations, see <a class="xref" href="../Destinations/Destinations_overview.html#concept_hpr_twm_jq" title="A destination stage represents the target for a pipeline. You can use one or more destinations in a pipeline.">Destinations</a>.</p>
</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Add additional stages as necessary.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When the pipeline is valid, you can use the <span class="ph uicontrol">Preview</span> icon
                    to preview data to fine-tune pipeline configuration. </span>
                <div class="itemgroup info">For more information, see <a class="xref" href="../Data_Preview/DataPreview.html#concept_jtn_s3m_lq" title="You can preview data to help build or fine-tune a pipeline. When you preview data, the Data Collector passes data through through the pipeline. You can examine input and output data for one stage at a time or for a group of stages.">Data Preview</a>. </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When the pipeline is complete, use the <span class="ph uicontrol">Start</span> icon to run
                    the pipeline. </span>
            </li>
</ol>

        <div class="section result">When the <span class="ph">Data
                  Collector</span>
            starts the pipeline, the Monitor panel displays real-time statistics for the pipeline. </div>

    </div>

<div class="related-links"></div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Pipeline Configuration</span></a></span>  </div><div class="footer"><div> </div><!-- Â© <a href="http://creativecommons.org/licenses/by-nc/4.0/legalcode">CC BY-NC 4.0.</a> StreamSets, 2015. --></div>
</body>
</html>
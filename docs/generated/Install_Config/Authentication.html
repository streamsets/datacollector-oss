
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="StreamSets Data Collector can authenticate user accounts based on files or LDAP. Best practice is to use LDAP if your organization has it. By default, Data Collector uses file authentication. When you ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Data Collector Authentication"></meta><meta name="abstract" content="StreamSets Data Collector can authenticate user accounts based on files or LDAP. Best practice is to use LDAP if your organization has it. By default, Data Collector uses file authentication."></meta><meta name="description" content="StreamSets Data Collector can authenticate user accounts based on files or LDAP. Best practice is to use LDAP if your organization has it. By default, Data Collector uses file authentication."></meta><meta name="DC.Relation" scheme="URI" content="../Install_Config/Install_Config_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_dns_dvg_h5"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Data Collector Authentication</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration">Installation and Configuration</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation and Configuration</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_dns_dvg_h5">
 <h1 class="title topictitle1">Data Collector Authentication</h1>

 
 <div class="body conbody"><p class="shortdesc">StreamSets <span class="ph">Data
                  Collector</span> can
        authenticate user accounts based on files or LDAP. Best practice is to use LDAP if your
        organization has it. By default, <span class="ph">Data
                  Collector</span> uses
        file authentication.</p>

  <p class="p">When you use file
            authentication, you can use Basic, Digest, or Form. Form is the default file
            authentication type. </p>

        <p class="p">To configure file authentication, edit the authentication realm.properties file for the
            authentication type. For example, to use Form, edit the
                <samp class="ph codeph">form-realm.properties</samp> file.</p>

        <p class="p">The realm.properties files are in the <span class="ph">Data
                  Collector</span>
            configuration directory, <samp class="ph codeph">$SDC_CONF</samp>.</p>

 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_x2j_5ts_g5">
 <h2 class="title topictitle2">Configuring LDAP Authentication</h2>

 
 <div class="body conbody"><p class="shortdesc">You can configure <span class="ph">Data
                  Collector</span> to use
        LDAP authentication.</p>

        <p class="p"><span class="ph">Data
                  Collector</span>
            provides file-based and LDAP authentication. If your organization uses LDAP, configure
                <span class="ph">Data
                  Collector</span> to use LDAP authentication. By default, <span class="ph">Data
                  Collector</span>
            uses file-based authentication.</p>

        <div class="p">To enable LDAP authentication, perform the following tasks:<ol class="ol" id="concept_x2j_5ts_g5__ol_b11_nxl_55">
                <li class="li">Configure the LDAP properties in the <span class="ph">Data
                  Collector</span> configuration file, <samp class="ph codeph">$SDC_CONF/sdc.properties</samp>:<div class="p">
                        <ul class="ul" id="concept_x2j_5ts_g5__ul_tqz_224_s5">
                            <li class="li">Set <span class="ph uicontrol">http.authentication.login.module</span> to
                                    <span class="ph uicontrol">ldap</span> to enable LDAP authentication.</li>

                            <li class="li">Configure
                                    <span class="ph uicontrol">http.authentication.ldap.role.mapping</span> to
                                map LDAP groups to <span class="ph">Data
                  Collector</span> roles.<div class="p">You can map multiple roles to the same group or vice
                                    versa. Use a semicolon to separate LDAP groups and commas to
                                    separate <span class="ph">Data
                  Collector</span> roles, as
                                    follows:<pre class="pre codeblock">&lt;ldap group&gt;:&lt;SDC role&gt;,&lt;additional SDC role&gt;,&lt;additional SDC role&gt;);
&lt;ldap group&gt;:&lt;SDC role&gt;,&lt;additional SDC role&gt;... </pre>
</div>
<div class="p">The
                                    following example maps the DEV LDAP group to the creator role,
                                    the OPS LDAP group to the manager role, and the SUPER LDAP group
                                    to both creator and
                                    manager:<pre class="pre codeblock">DEV:creator;OPS:manager,SUPER:creator,manager</pre>
</div>
</li>

                        </ul>

                    </div>
</li>

                <li class="li">Configure LDAP connection information in the
                        <samp class="ph codeph">$SDC_CONF/ldap-login.conf</samp> file. <div class="p">In the file, configure
                        the following properties:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_x2j_5ts_g5__table_g4g_hx4_s5" class="table" frame="border" border="1" rules="all">
                                
                                
                                <thead class="thead" align="left">
                                    <tr class="row">
                                        <th class="entry" valign="top" width="30%" id="d86346e153">LDAP Property</th>

                                        <th class="entry" valign="top" width="70%" id="d86346e156">Description</th>

                                    </tr>

                                </thead>

                                <tbody class="tbody">
                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">debug</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Enables LDAP debugging. Default is false.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">useLdaps</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Enables using LDAP over SSL. Default is false.
                                        </td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">contextFactory</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">LDAP initial context factory. Default is
                                            com.sun.jndi.ldap.LdapCtxFactory.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">hostname</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">LDAP server host name.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">port</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">LDAP server port. Typically 389 for LDAP and 636 for
                                            LDAPS.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">bindDn</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Root distinguished name (DN) for the connection.
                                        </td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">bindPassword</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Password for the connection. For additional security,
                                            save the password in the
                                            <samp class="ph codeph">$SDC_CONF/ldap-bind-password.txt</samp> file without additional
                                            characters, spaces, or line breaks. <p class="p">Default is
                                                @ldap-bind-password.txt@, which points to the
                                                <samp class="ph codeph">ldap-bind-password.txt</samp> file for the
                                            password.</p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">authenticationMethod</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Authentication method. Default is simple. </td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">forceBindingLogin</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Determines if binding login checks are performed. Use
                                            one of the following options:<ul class="ul" id="concept_x2j_5ts_g5__ul_dpb_z2z_s5">
                                                <li class="li">false - <span class="ph">Data
                  Collector</span> performs the authentication based on
                                                  information received from the LDAP server. <p class="p">When
                                                  set to false, the bindDn user must have permission
                                                  to access the details, password, and group
                                                  information for users.</p>
<p class="p">Use for Digest
                                                  authentication.</p>
</li>

                                                <li class="li">true - <span class="ph">Data
                  Collector</span> passes the user credentials to the LDAP server
                                                  for authentication. <p class="p">When set to true, the
                                                  bindDn user must have permission to access the
                                                  group information for users.</p>
<p class="p">Use for Basic
                                                  or Form authentication, or when the password
                                                  stored in the LDAP server is encrypted.</p>
</li>

                                            </ul>
<p class="p">Default is false. </p>
</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">userBaseDn</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Base DN under which user accounts are located.
                                        </td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">userRdnAttribute</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Name of the username attribute. Default is
                                            uid.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">userIdAttribute</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Name of the user ID attribute. Default is
                                            uid.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">userPasswordAttribute</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Name of the attribute where the user password is
                                            stored. Default is userPassword.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">userObjectClass</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Name of the user object class. Default is
                                            inetOrgPerson.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">roleBaseDn</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Base DN to search for role membership. </td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">roleNameAttribute</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Name of the attribute for role names. Default is
                                            roleName.</td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">roleMemberAttribute</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Name of the role attribute for user names. Default is
                                            uniqueMember. </td>

                                    </tr>

                                    <tr class="row">
                                        <td class="entry" valign="top" width="30%" headers="d86346e153 ">roleObjectClass</td>

                                        <td class="entry" valign="top" width="70%" headers="d86346e156 ">Role object class. Default is
                                            groupOfUniqueNames.</td>

                                    </tr>

                                </tbody>

                            </table>
</div>
</div>
<div class="p">The following example shows the <samp class="ph codeph">ldap-login.conf</samp> file for an
                        Active Directory
                        server:<pre class="pre codeblock">ldap {
  com.streamsets.datacollector.http.LdapLoginModule required
  debug="true"
  useLdaps="true"
  contextFactory="com.sun.jndi.ldap.LdapCtxFactory"
  hostname="*******"
  port="636"
  bindDn="********"
  bindPassword="@ldap-bind-password.txt@"
  authenticationMethod="simple"
  forceBindingLogin="true"
  userBaseDn="ou=example,dc=example,dc=net"
  userRdnAttribute="CN"
  userIdAttribute="sAMAccountName"
  userPasswordAttribute="userPassword"
  userObjectClass="person"
  roleBaseDn="ou=Example,dc=example,dc=net"
  roleNameAttribute=â€œcn"
  roleMemberAttribute="member"
  roleObjectClass="group";
};</pre>
</div>
</li>

            </ol>
</div>

    </div>

    <div class="related-links"><div class="relinfo"><strong>Related information</strong><br xmlns="http://www.w3.org/1999/xhtml" />
<div class="related_link"><a class="navheader_parent_path" href="DCEnvironmentConfig.html#concept_rng_qym_qr" title="You can edit the Data Collector environment configuration file to modify the directories used to store configuration, data, log, and resource files.When you run Data Collector as a service, you must create a system user and group named sdc, or you must edit the values of the SDC_USER and SDC_GROUP environment variables to point to an existing system user or group.You can define the Data Collector Java heap size. By default, the Java heap size is 1024 MB. When you use Data Collector with Java 7, you can define the Java Permanent Generation size, also known as the PermGen size.By default, Data Collector is configured to use TLS versions 1.1 and 1.2. To connect to a system that uses an earlier version of TLS, modify the Dhttps.protocols option in the SDC_JAVA_OPTS environment variable in the Data Collector environment configuration file.Data Collector includes a Java Security Manager that is enabled by default. You can edit the Data Collector environment configuration file to configure the path to jar files to be added to the Data Collector root classloader.">Data Collector Environment Configuration</a></div>
</div>
</div>
<div class="topic concept nested2" id="concept_fyr_dkv_1x">
 <h3 class="title topictitle3">LDAP Authentication with MapR Stages</h3>

 
 <div class="body conbody"><p class="shortdesc">To use MapR stages with a <span class="ph">Data
                  Collector</span>
        configured to use LDAP authentication, you must perform an additional step after configuring
        LDAP authentication.</p>

  <p class="p">The MapR distribution for
            Hadoop uses the Java Authentication and Authorization Service (JAAS) to control security
            features. The <samp class="ph codeph">$MAPR_HOME/conf/mapr.login.conf</samp> file specifies
            configuration parameters for JAAS.</p>

        <p class="p"><span class="ph">Data
                  Collector</span>
            expects LDAP configuration to be in the JAAS configuration file
                <samp class="ph codeph">$SDC_CONF/ldap-login.conf</samp> and overrides the
                <samp class="ph codeph">java.security.auth.login.config</samp> system property to point to this
            file.</p>

        <p class="p">To avoid this conflict, copy the contents of the
                <samp class="ph codeph">$MAPR_HOME/conf/mapr.login.conf</samp> file into the
                <samp class="ph codeph">$SDC_CONF/ldap-login.conf</samp> file after you configure the LDAP
            connection information in the <samp class="ph codeph">ldap-login.conf</samp> file.</p>

        <div class="p">For example, use the following command to append the contents of the
                <samp class="ph codeph">mapr.login.conf</samp> file to the end of the
                <samp class="ph codeph">ldap-login.conf</samp>
            file:<pre class="pre codeblock">cat $MAPR_HOME/conf/mapr.login.conf &gt;&gt; $SDC_CONF/ldap-login.conf</pre>
</div>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_dt2_cpb_kr">
 <h2 class="title topictitle2">Users and Roles</h2>

 
 <div class="body conbody"><p class="shortdesc"><span class="ph">Data
                  Collector</span>
    provides several roles and a default user account based on each role. You can change or remove
    these accounts. You can also create new user accounts. </p>

  <p class="p">For increased security, change the passwords for the default
      accounts. A production deployment of <span class="ph">Data
                  Collector</span> should
      integrate with LDAP authentication. </p>

    <p class="p"><span class="ph">Data
                  Collector</span> roles
      define the tasks that a user can perform. When you configure a user, assign it one or more
      roles. Users can perform any task that their roles allow.</p>

  <div class="p"><span class="ph">Data
                  Collector</span> provides
      the following roles: <dl class="dl">
        
          <dt class="dt dlterm">admin</dt>

          <dd class="dd">Allows you to perform any <span class="ph">Data
                  Collector</span>
            task. </dd>

          <dd class="dd">The default login for the admin user account is <samp class="ph codeph">admin</samp> /
              <samp class="ph codeph">admin</samp>.</dd>

        
        
          <dt class="dt dlterm">manager</dt>

          <dd class="dd">Allows you to manage pipelines. As a manager, you can start and stop pipelines,
            monitor pipelines, configure and reset alerts, and review snapshots. You cannot
            configure pipelines or preview data.</dd>

          <dd class="dd">The default login for the manager user account is <samp class="ph codeph">manager</samp> /
              <samp class="ph codeph">manager</samp>.</dd>

        
        
          <dt class="dt dlterm">creator</dt>

          <dd class="dd">Allows you to configure pipelines. As a creator, you can configure pipelines and
            alerts, preview data, and monitor the pipeline. You cannot review snapshots or reset
            alerts.</dd>

          <dd class="dd">The default login for the creator user account is <samp class="ph codeph">creator</samp> /
              <samp class="ph codeph">creator</samp>.</dd>

        
        
          <dt class="dt dlterm">guest</dt>

          <dd class="dd">Allows read-only access. As a guest, you can view pipeline and alert configuration,
            view general monitoring and log information. You cannot preview data or review
            snapshots, or configure pipelines or alerts.</dd>

          <dd class="dd">The default login for the guest user account is <samp class="ph codeph">guest</samp> /
              <samp class="ph codeph">guest</samp>.</dd>

        
      </dl>
</div>

 </div>

<div class="topic task nested2" id="task_nsz_lp4_1r">
    <h3 class="title topictitle3">Configuring Users (File-Based Authentication)</h3>

    
    <div class="body taskbody"><p class="shortdesc"><span class="ph">Data
                  Collector</span>
        includes several default users - one for each role. For increased security, you can
        customize the default users, delete them, or create additional Data Collector
        users.</p>

        <div class="section context">
            <p class="p">If <span class="ph">Data
                  Collector</span> uses LDAP authentication, use LDAP to configure additional users. </p>

            <p class="p">When using the default file-based authentication, you need to configure additional
                users in the properties file for the type of authentication that you use. For
                example, if you use basic authentication, use the <samp class="ph codeph">basic-realm.properties</samp> file.</p>

            <p class="p">To hash login information, you can use an md5 program such as md5 on Mac OS X or
                md5sum on Linux. </p>

            <div class="p">For basic and form authentication, hash the password alone. For example:
                <pre class="pre codeblock">echo -n "&lt;password&gt;" | md5</pre>
</div>

            <p class="p">For digest authentication, hash the combination of &lt;user
                name&gt;:&lt;realm&gt;:&lt;password&gt;, where &lt;realm&gt; is the authentication type. </p>

            <div class="p">For example, you might use the following
                command:<pre class="pre codeblock">echo -n "&lt;user name&gt;:&lt;realm&gt;:&lt;password&gt;" | md5</pre>
</div>

            <p class="p">as follows:</p>

            <div class="p">
                <pre class="pre codeblock">echo -n "jdoe:digest-realm:JdoePass" | md5</pre>

            </div>

        </div>

        <ol class="ol steps" id="task_nsz_lp4_1r__steps_ody_3q4_1r"><li class="li step stepexpand">
                <span class="ph cmd">To configure a user, modify the properties file for the type of authentication
                    that you use. </span>
                <div class="itemgroup info">The file name is
                        <span class="ph filepath">$SDC_CONF/&lt;authentication&gt;-realm.properties</span>. </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">For each new user, add a user definition using the following format:</span>
                <div class="itemgroup info">
                    <pre class="pre codeblock">&lt;user name&gt;: MD5:&lt;md5-text&gt;, user, &lt;role&gt; [, &lt;additional role&gt;, &lt;additional role&gt;...]</pre>

                </div>
                <div class="itemgroup info">
                    <div class="note note"><span class="notetitle">Note:</span> Assign one or more roles for each user. Be sure to include "user" in every
                        user definition.</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To make the new users available, restart <span class="ph">Data
                  Collector</span>.</span>
            </li>
</ol>

    </div>

</div>
</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation and Configuration</span></a></span>  </div><div class="footer"><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>